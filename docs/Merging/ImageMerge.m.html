<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>Image-Fusion.Merging.ImageMerge API documentation</title>
    <meta name="description" content="" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.debug">debug</a></li>
  </ul>

    </li>


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#Image-Fusion.Merging.ImageMerge.Merger">Merger</a></span>
        
          
  <ul>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.__init__">__init__</a></li>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.checkAndAct">checkAndAct</a></li>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.convert">convert</a></li>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.cropFind">cropFind</a></li>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.exportMerge">exportMerge</a></li>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.merge">merge</a></li>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.mergeAs">mergeAs</a></li>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.printDiffSame">printDiffSame</a></li>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.save">save</a></li>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.setup">setup</a></li>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.show">show</a></li>
    <li class="mono"><a href="#Image-Fusion.Merging.ImageMerge.Merger.testMerge">testMerge</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">Image-Fusion.Merging.ImageMerge</span> module</h1>
  
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge" class="source">
    <div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="kn">import</span> <span class="nn">PixelProcess</span>

<span class="n">debug</span> <span class="o">=</span> <span class="mi">0</span>


<span class="k">class</span> <span class="nc">Merger</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        A merger is a class that allows for a number of images to merged sequentially. It is designed to</span>
<span class="sd">        merge each image incrementally, outputting to an outfile when requested. There are a variety of</span>
<span class="sd">        ways to preform the merges for different circumstance. The class contains an autosave feature that</span>
<span class="sd">        will save the image after each merge, which is defaulted to off. There is also a contained PixelChecker</span>
<span class="sd">        and PixelActor, which define how the merges process.</span>
<span class="sd">        Merger works off an internal state. Each merge operation (irrelevant of number merged in that operation)</span>
<span class="sd">        changes the state of the output data. Merge and MergeAs change the state permanently. ExportMerge and</span>
<span class="sd">        TestMerge do not change the state of the output data.</span>

<span class="sd">        `outfile`: The file address to save the output to.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span> <span class="o">=</span> <span class="n">outfile</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span> <span class="o">=</span> <span class="n">PixelProcess</span><span class="o">.</span><span class="n">PixelRemote</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mergedFiles</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">file</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        This method is called if a merge is activated and no prior merges have been done. It sets the image to</span>
<span class="sd">        be merged as the output result, as nothing cannot be merged with an image object. This method is</span>
<span class="sd">        internal and does not need to be called by a user. It is called if necessary from the merge methods.</span>

<span class="sd">        `file`: A path to an image to initialize the Merge with.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        The main merge method. All other variants actually call this merge at some point in execution. The</span>
<span class="sd">        method calls setup if no merges have been done prior so that merges can be done against the first.</span>
<span class="sd">        This uses the checkandact method to operate on each image given to it. That method covers all the</span>
<span class="sd">        actual pixel processing.</span>
<span class="sd">        When debug is enabled, merge prints the percentage of different and same pixels.</span>

<span class="sd">        `images`: Any number of image paths to merge together.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">images</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
                <span class="n">changed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkAndAct</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">mergedFiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">printDiffSame</span><span class="p">(</span><span class="n">changed</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">testMerge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        A test merge is a merge that doesn&#39;t save state. Each call to merge changes the internal data.</span>
<span class="sd">        In the case a user wants to see the result of a merge without modifying the data, test merge will</span>
<span class="sd">        do the job. Test merge is actually a call to exportmerge taking advantage of it&#39;s outfile variable.</span>

<span class="sd">        `images`: Any number of image paths to be merged.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exportMerge</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">exportMerge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Export merge is a merge operation that does not change state. Unlike TestMerge, this merge will</span>
<span class="sd">        write the temporary image to a given outfile. If the outfile is None, export will not write anything.</span>
<span class="sd">        This side effect is how TestMerge works. Export merge turns off the autosave feature to be sure that</span>
<span class="sd">        doesn&#39;t modify the main output file.</span>

<span class="sd">        `images`: the image paths to be merged.</span>

<span class="sd">        `outfile`: Where to set the new output path to.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Make a backup of the outimage if one has been initialized.</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span><span class="p">:</span> <span class="n">orig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Saves the autosave state and merges.</span>
        <span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="o">*</span><span class="n">images</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span> <span class="o">=</span> <span class="n">state</span>

        <span class="c1"># If the outfile is None, show the image and continue. If an outfile exists, save the image instead.</span>
        <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="c1"># If the back up was made, restore the status to before the last merge. Else, reset the object.</span>
        <span class="k">if</span> <span class="n">orig</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span> <span class="o">=</span> <span class="n">orig</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span> <span class="o">=</span> <span class="n">Merger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outfile</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">mergeAs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        This is a variant of the main merge method. It changes the outfile permanently, functioning like</span>
<span class="sd">        a save as option. Otherwise it differs completely to merge.</span>

<span class="sd">        `images`: the image paths to be merged.</span>

<span class="sd">        `outfile`: Where to set the new output path to.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span> <span class="o">=</span> <span class="n">outfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="o">*</span><span class="n">images</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_tupleSub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">tt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Finds the difference of each RGB value in two pixels. The difference has to be</span>
<span class="sd">        greater than 5 to fail.</span>

<span class="sd">        `t`: The first pixel to compare.</span>

<span class="sd">        `tt`: The second to compare.</span>

<span class="sd">        `return`: False if the difference between any RGB is greater than 5, else true.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">one</span><span class="p">,</span> <span class="n">two</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">tt</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">one</span> <span class="o">-</span> <span class="n">two</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">_rowSizer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        This method take a row and makes the length equal to the length parameter. It fills</span>
<span class="sd">        the row using the tracked image pixel data, building a row on y value Y starting at</span>
<span class="sd">        x in that row. Supports shrinking a row as well, though that isn&#39;t needed anymore.</span>

<span class="sd">        `x`: X value to start the row on.</span>

<span class="sd">        `y`: Y value of the row.</span>

<span class="sd">        `row`: The array that will hold the row.</span>

<span class="sd">        `length`: required length of the row.</span>

<span class="sd">        `return`: The new row.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">!=</span> <span class="n">length</span><span class="p">:</span> <span class="c1">#get the row to match the size.</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">length</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">row</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">:</span>
               <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">),</span><span class="n">y</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">row</span>

    <span class="k">def</span> <span class="nf">_compareRow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sideOne</span><span class="p">,</span> <span class="n">sideTwo</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Compares two rows to another. This is used to compare the top and bottom, as well as the</span>
<span class="sd">        left and right rows of the subimage to an equally sized row from the tracked image.</span>
<span class="sd">        The comparison is done via tuplesub, this controls the pixel flow into that function.</span>

<span class="sd">        `sideOne`: The top or right side to be compared.</span>

<span class="sd">        `sideTwo`: The bottom or left side to be compared.</span>

<span class="sd">        `row`: The row to compare to from the tracked image.</span>

<span class="sd">        `return`: Flag (True if a match was found), if1 (sideOne is same or not), &amp; if2 (same for sideTwo)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">flag</span><span class="p">,</span> <span class="n">if1</span><span class="p">,</span> <span class="n">if2</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span>
        <span class="k">for</span> <span class="n">side1</span><span class="p">,</span> <span class="n">side2</span><span class="p">,</span> <span class="n">lg</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sideOne</span><span class="p">,</span> <span class="n">sideTwo</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">if1</span><span class="p">:</span> <span class="n">if1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tupleSub</span><span class="p">(</span><span class="n">side1</span><span class="p">,</span> <span class="n">lg</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">if2</span><span class="p">:</span> <span class="n">if2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tupleSub</span><span class="p">(</span><span class="n">side2</span><span class="p">,</span> <span class="n">lg</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">if1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">if2</span><span class="p">:</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">flag</span><span class="p">,</span> <span class="n">if1</span><span class="p">,</span> <span class="n">if2</span>

    <span class="k">def</span> <span class="nf">cropFind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">smallImage</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Finds where a subimage of the tracked image fits in the tracked image.</span>
<span class="sd">        This is done by comparing the sides of the outfile image with each</span>
<span class="sd">        row of pixels in the tracked image. This acommodates for rotation. The match</span>
<span class="sd">        is as close to exact as is practical. Saving and cropping images can sometimes</span>
<span class="sd">        cause small differences such as 1 or or 2 values.</span>
<span class="sd">        The if result not none section can be replaced later to change what is done</span>
<span class="sd">        with the result.</span>

<span class="sd">        `outfile`: path to save the merged crop to.</span>

<span class="sd">        `smallImage`: A subimage of the tracked image.</span>

<span class="sd">        `return`: None if no match is found, the result is one is.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">smim</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">smallImage</span><span class="p">)</span>
        <span class="n">smdata</span> <span class="o">=</span> <span class="n">smim</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="n">xlen</span><span class="p">,</span> <span class="n">ylen</span> <span class="o">=</span> <span class="n">smim</span><span class="o">.</span><span class="n">size</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">None</span> 

        <span class="n">sides</span> <span class="o">=</span> <span class="p">[[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]]</span>

        <span class="n">high</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xlen</span><span class="p">,</span> <span class="n">ylen</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">high</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">xlen</span><span class="p">:</span>
                <span class="n">sides</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
                <span class="n">sides</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[((</span><span class="n">xlen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="n">ylen</span><span class="o">-</span><span class="mi">1</span><span class="p">)])</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ylen</span><span class="p">:</span>
                <span class="n">sides</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[(</span><span class="n">xlen</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">)])</span>
                <span class="n">sides</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">ylen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">i</span><span class="p">)])</span>
        <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="n">sides</span><span class="p">:</span>
            <span class="n">side</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">side</span><span class="p">)</span>
        <span class="n">sides</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">sides</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">row1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowSizer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">y</span><span class="p">,[],</span><span class="n">xlen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">row2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowSizer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">y</span><span class="p">,[],</span><span class="n">ylen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">break</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">xlen</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="c1">#Top and Bottom check.</span>

                    <span class="n">row1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">row1</span><span class="p">),</span><span class="n">y</span><span class="p">])</span>
                    <span class="n">flag</span><span class="p">,</span> <span class="n">if0</span><span class="p">,</span> <span class="n">if2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compareRow</span><span class="p">(</span><span class="n">sides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sides</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">row1</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if0</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span>
                    <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if2</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">2</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">ylen</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>

                    <span class="n">row2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">row2</span><span class="p">),</span><span class="n">y</span><span class="p">])</span>
                    <span class="n">flag</span><span class="p">,</span> <span class="n">if1</span><span class="p">,</span> <span class="n">if3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compareRow</span><span class="p">(</span><span class="n">sides</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sides</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">row2</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if1</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if3</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">3</span>
                <span class="k">del</span> <span class="n">row1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">row2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;RGBA&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">imdata</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">smim</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">smim</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="n">newx</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span>
                    <span class="n">newy</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">y</span>
                    <span class="n">imdata</span><span class="p">[</span><span class="n">newx</span><span class="p">,</span> <span class="n">newy</span><span class="p">]</span> <span class="o">=</span> <span class="n">smdata</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span>

            <span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exportMerge</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">checkAndAct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        The primary action method. This method takes an image and merges it onto the output data stored</span>
<span class="sd">        in the class. For every pixel in each image, the class&#39;s pixelChecker is used to compare them.</span>
<span class="sd">        If the check returns true, the class&#39;s pixelActor is called to act on the pixels. For every acted on</span>
<span class="sd">        pixel pair, the method&#39;s counter is increased. This count is returned as a statistic.</span>

<span class="sd">        `img`: An image file to be merged onto the class&#39;s image.</span>

<span class="sd">        `return`: The number of modified pixels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">compareimage</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">comparedata</span> <span class="o">=</span> <span class="n">compareimage</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

        <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="n">counter</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">counter</span>

    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        This method converts any number of given images to RGBA color format. Pixel comparision is done via</span>
<span class="sd">        the rgb values, and requires the images to be in that format. The converted files are saved to</span>
<span class="sd">        a Converts folder as to not fill ones input folder with temporary files.</span>

<span class="sd">        `images`: The images that need to be converted.</span>

<span class="sd">        `return`: A list of file paths leading to the convert images, which can passed to further methods.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
            <span class="n">im</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGBA&quot;</span><span class="p">)</span>

            <span class="n">split</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
            <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">split</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;/Converts/&#39;</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>

            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Shows the image if an image is given, otherwise defaults to the class&#39;s image.</span>

<span class="sd">        `image`: The image to show, defaults to the image contained in the class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span><span class="p">:</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span>
        <span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Saves an image to disk. The image can be specified, other wise the class&#39;s image is defaulted to.</span>
<span class="sd">        The outfile can also be optionally specified.</span>

<span class="sd">        `image`: Defaults to the class&#39;s image unless specified. The image to be saved.</span>

<span class="sd">        `outfile`: The location to save to. Defaults to the class&#39;s output path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span><span class="p">:</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">outfile</span><span class="p">:</span> <span class="n">outfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span>
        <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">printDiffSame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Prints the different pixel percentage and the same pixel percentage.</span>

<span class="sd">        `counter`: The count of changed pixels in a merge operation. Obtained from checkandact.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="s2">&quot;Different Pixels:&quot;</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">round</span><span class="p">((</span><span class="n">counter</span><span class="o">/</span><span class="mf">360000.</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="s2">&quot; Same Pixels:&quot;</span><span class="p">,</span> \
            <span class="mi">360000</span><span class="o">-</span><span class="n">counter</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">round</span><span class="p">(((</span><span class="mi">360000</span><span class="o">-</span><span class="n">counter</span><span class="p">)</span><span class="o">/</span><span class="mf">360000.</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">debug</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Input/Camera 1.jpg&#39;</span><span class="p">,</span> <span class="s1">&#39;Input\Camera cropend.jpg&#39;</span><span class="p">]</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">Merger</span><span class="p">(</span><span class="s1">&#39;Output/ImFuse.jpg&#39;</span><span class="p">)</span>

    <span class="n">m</span><span class="o">.</span><span class="n">processor</span> <span class="o">=</span> <span class="n">PixelProcess</span><span class="o">.</span><span class="n">ExtractPixelRemote</span><span class="p">()</span>
    <span class="n">m</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">setActorCommand</span><span class="p">(</span><span class="n">PixelProcess</span><span class="o">.</span><span class="n">TakeNonEmptySecondCommand</span><span class="p">())</span>
    <span class="n">m</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">setCheckCommand</span><span class="p">(</span><span class="n">PixelProcess</span><span class="o">.</span><span class="n">ColorDiffCommand</span><span class="p">())</span>
    <span class="n">m</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">checkcmd</span><span class="o">.</span><span class="n">diffnum</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">m</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="c1"># m.merge()</span>
    <span class="k">print</span> <span class="n">m</span><span class="o">.</span><span class="n">cropFind</span><span class="p">(</span><span class="s1">&#39;foo.jpg&#39;</span><span class="p">,</span> <span class="n">inputs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="c1"># print &quot;Number of pixels recorded.&quot;, len(m.processor.pixels)</span>
    <span class="c1">#</span>
    <span class="c1"># post = m.processor.getGroupedPixels()</span>
    <span class="c1">#</span>
    <span class="c1"># post.sortCount()</span>
    <span class="c1"># post.filter()</span>
    <span class="c1">#</span>
    <span class="c1"># for p in post.generator():</span>
    <span class="c1">#     print p</span>
    <span class="c1">#</span>
    <span class="c1"># f = post.first()</span>
    <span class="c1"># print f</span>
    <span class="c1">#</span>
    <span class="c1"># # for group in post:  # Post the groups to the outimage.</span>
    <span class="c1"># #     for p in group.pixels:</span>
    <span class="c1"># #         imdata[p[0], p[1]] = m.processor.pixels[p]</span>
    <span class="c1">#</span>
    <span class="c1"># #Output the first group to it&#39;s own image.</span>
    <span class="c1"># f.save(&#39;Output/Only Pixels.png&#39;, m.processor.pixels)</span>
    <span class="c1">#</span>
    <span class="c1"># m.processor.setActorCommand(PixelProcess.RedHighlightCommand())</span>
    <span class="c1">#</span>
    <span class="c1"># # m.exportMerge(&#39;Output/DifferenceFile.jpg&#39;, &#39;Output/One Fused Provided.jpg&#39;)</span>
    <span class="c1">#</span>
    <span class="c1"># m.save()</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="Image-Fusion.Merging.ImageMerge.debug" class="name">var <span class="ident">debug</span></p>
      
  
  <div class="source_cont">
</div>

      </div>


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="Image-Fusion.Merging.ImageMerge.Merger" class="name">class <span class="ident">Merger</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Merger</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        A merger is a class that allows for a number of images to merged sequentially. It is designed to</span>
<span class="sd">        merge each image incrementally, outputting to an outfile when requested. There are a variety of</span>
<span class="sd">        ways to preform the merges for different circumstance. The class contains an autosave feature that</span>
<span class="sd">        will save the image after each merge, which is defaulted to off. There is also a contained PixelChecker</span>
<span class="sd">        and PixelActor, which define how the merges process.</span>
<span class="sd">        Merger works off an internal state. Each merge operation (irrelevant of number merged in that operation)</span>
<span class="sd">        changes the state of the output data. Merge and MergeAs change the state permanently. ExportMerge and</span>
<span class="sd">        TestMerge do not change the state of the output data.</span>

<span class="sd">        `outfile`: The file address to save the output to.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span> <span class="o">=</span> <span class="n">outfile</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span> <span class="o">=</span> <span class="n">PixelProcess</span><span class="o">.</span><span class="n">PixelRemote</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mergedFiles</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">file</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        This method is called if a merge is activated and no prior merges have been done. It sets the image to</span>
<span class="sd">        be merged as the output result, as nothing cannot be merged with an image object. This method is</span>
<span class="sd">        internal and does not need to be called by a user. It is called if necessary from the merge methods.</span>

<span class="sd">        `file`: A path to an image to initialize the Merge with.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        The main merge method. All other variants actually call this merge at some point in execution. The</span>
<span class="sd">        method calls setup if no merges have been done prior so that merges can be done against the first.</span>
<span class="sd">        This uses the checkandact method to operate on each image given to it. That method covers all the</span>
<span class="sd">        actual pixel processing.</span>
<span class="sd">        When debug is enabled, merge prints the percentage of different and same pixels.</span>

<span class="sd">        `images`: Any number of image paths to merge together.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">images</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
                <span class="n">changed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkAndAct</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">mergedFiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">printDiffSame</span><span class="p">(</span><span class="n">changed</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">testMerge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        A test merge is a merge that doesn&#39;t save state. Each call to merge changes the internal data.</span>
<span class="sd">        In the case a user wants to see the result of a merge without modifying the data, test merge will</span>
<span class="sd">        do the job. Test merge is actually a call to exportmerge taking advantage of it&#39;s outfile variable.</span>

<span class="sd">        `images`: Any number of image paths to be merged.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exportMerge</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">exportMerge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Export merge is a merge operation that does not change state. Unlike TestMerge, this merge will</span>
<span class="sd">        write the temporary image to a given outfile. If the outfile is None, export will not write anything.</span>
<span class="sd">        This side effect is how TestMerge works. Export merge turns off the autosave feature to be sure that</span>
<span class="sd">        doesn&#39;t modify the main output file.</span>

<span class="sd">        `images`: the image paths to be merged.</span>

<span class="sd">        `outfile`: Where to set the new output path to.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Make a backup of the outimage if one has been initialized.</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span><span class="p">:</span> <span class="n">orig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Saves the autosave state and merges.</span>
        <span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="o">*</span><span class="n">images</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span> <span class="o">=</span> <span class="n">state</span>

        <span class="c1"># If the outfile is None, show the image and continue. If an outfile exists, save the image instead.</span>
        <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="c1"># If the back up was made, restore the status to before the last merge. Else, reset the object.</span>
        <span class="k">if</span> <span class="n">orig</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span> <span class="o">=</span> <span class="n">orig</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span> <span class="o">=</span> <span class="n">Merger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outfile</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">mergeAs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        This is a variant of the main merge method. It changes the outfile permanently, functioning like</span>
<span class="sd">        a save as option. Otherwise it differs completely to merge.</span>

<span class="sd">        `images`: the image paths to be merged.</span>

<span class="sd">        `outfile`: Where to set the new output path to.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span> <span class="o">=</span> <span class="n">outfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="o">*</span><span class="n">images</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_tupleSub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">tt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Finds the difference of each RGB value in two pixels. The difference has to be</span>
<span class="sd">        greater than 5 to fail.</span>

<span class="sd">        `t`: The first pixel to compare.</span>

<span class="sd">        `tt`: The second to compare.</span>

<span class="sd">        `return`: False if the difference between any RGB is greater than 5, else true.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">one</span><span class="p">,</span> <span class="n">two</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">tt</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">one</span> <span class="o">-</span> <span class="n">two</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">_rowSizer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        This method take a row and makes the length equal to the length parameter. It fills</span>
<span class="sd">        the row using the tracked image pixel data, building a row on y value Y starting at</span>
<span class="sd">        x in that row. Supports shrinking a row as well, though that isn&#39;t needed anymore.</span>

<span class="sd">        `x`: X value to start the row on.</span>

<span class="sd">        `y`: Y value of the row.</span>

<span class="sd">        `row`: The array that will hold the row.</span>

<span class="sd">        `length`: required length of the row.</span>

<span class="sd">        `return`: The new row.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">!=</span> <span class="n">length</span><span class="p">:</span> <span class="c1">#get the row to match the size.</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">length</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">row</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">:</span>
               <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">),</span><span class="n">y</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">row</span>

    <span class="k">def</span> <span class="nf">_compareRow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sideOne</span><span class="p">,</span> <span class="n">sideTwo</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Compares two rows to another. This is used to compare the top and bottom, as well as the</span>
<span class="sd">        left and right rows of the subimage to an equally sized row from the tracked image.</span>
<span class="sd">        The comparison is done via tuplesub, this controls the pixel flow into that function.</span>

<span class="sd">        `sideOne`: The top or right side to be compared.</span>

<span class="sd">        `sideTwo`: The bottom or left side to be compared.</span>

<span class="sd">        `row`: The row to compare to from the tracked image.</span>

<span class="sd">        `return`: Flag (True if a match was found), if1 (sideOne is same or not), &amp; if2 (same for sideTwo)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">flag</span><span class="p">,</span> <span class="n">if1</span><span class="p">,</span> <span class="n">if2</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span>
        <span class="k">for</span> <span class="n">side1</span><span class="p">,</span> <span class="n">side2</span><span class="p">,</span> <span class="n">lg</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sideOne</span><span class="p">,</span> <span class="n">sideTwo</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">if1</span><span class="p">:</span> <span class="n">if1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tupleSub</span><span class="p">(</span><span class="n">side1</span><span class="p">,</span> <span class="n">lg</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">if2</span><span class="p">:</span> <span class="n">if2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tupleSub</span><span class="p">(</span><span class="n">side2</span><span class="p">,</span> <span class="n">lg</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">if1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">if2</span><span class="p">:</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">flag</span><span class="p">,</span> <span class="n">if1</span><span class="p">,</span> <span class="n">if2</span>

    <span class="k">def</span> <span class="nf">cropFind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">smallImage</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Finds where a subimage of the tracked image fits in the tracked image.</span>
<span class="sd">        This is done by comparing the sides of the outfile image with each</span>
<span class="sd">        row of pixels in the tracked image. This acommodates for rotation. The match</span>
<span class="sd">        is as close to exact as is practical. Saving and cropping images can sometimes</span>
<span class="sd">        cause small differences such as 1 or or 2 values.</span>
<span class="sd">        The if result not none section can be replaced later to change what is done</span>
<span class="sd">        with the result.</span>

<span class="sd">        `outfile`: path to save the merged crop to.</span>

<span class="sd">        `smallImage`: A subimage of the tracked image.</span>

<span class="sd">        `return`: None if no match is found, the result is one is.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">smim</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">smallImage</span><span class="p">)</span>
        <span class="n">smdata</span> <span class="o">=</span> <span class="n">smim</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="n">xlen</span><span class="p">,</span> <span class="n">ylen</span> <span class="o">=</span> <span class="n">smim</span><span class="o">.</span><span class="n">size</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">None</span> 

        <span class="n">sides</span> <span class="o">=</span> <span class="p">[[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]]</span>

        <span class="n">high</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xlen</span><span class="p">,</span> <span class="n">ylen</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">high</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">xlen</span><span class="p">:</span>
                <span class="n">sides</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
                <span class="n">sides</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[((</span><span class="n">xlen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="n">ylen</span><span class="o">-</span><span class="mi">1</span><span class="p">)])</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ylen</span><span class="p">:</span>
                <span class="n">sides</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[(</span><span class="n">xlen</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">)])</span>
                <span class="n">sides</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">ylen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">i</span><span class="p">)])</span>
        <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="n">sides</span><span class="p">:</span>
            <span class="n">side</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">side</span><span class="p">)</span>
        <span class="n">sides</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">sides</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">row1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowSizer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">y</span><span class="p">,[],</span><span class="n">xlen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">row2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowSizer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">y</span><span class="p">,[],</span><span class="n">ylen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">break</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">xlen</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="c1">#Top and Bottom check.</span>

                    <span class="n">row1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">row1</span><span class="p">),</span><span class="n">y</span><span class="p">])</span>
                    <span class="n">flag</span><span class="p">,</span> <span class="n">if0</span><span class="p">,</span> <span class="n">if2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compareRow</span><span class="p">(</span><span class="n">sides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sides</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">row1</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if0</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span>
                    <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if2</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">2</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">ylen</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>

                    <span class="n">row2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">row2</span><span class="p">),</span><span class="n">y</span><span class="p">])</span>
                    <span class="n">flag</span><span class="p">,</span> <span class="n">if1</span><span class="p">,</span> <span class="n">if3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compareRow</span><span class="p">(</span><span class="n">sides</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sides</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">row2</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if1</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if3</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">3</span>
                <span class="k">del</span> <span class="n">row1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">row2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;RGBA&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">imdata</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">smim</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">smim</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="n">newx</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span>
                    <span class="n">newy</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">y</span>
                    <span class="n">imdata</span><span class="p">[</span><span class="n">newx</span><span class="p">,</span> <span class="n">newy</span><span class="p">]</span> <span class="o">=</span> <span class="n">smdata</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span>

            <span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exportMerge</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">checkAndAct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        The primary action method. This method takes an image and merges it onto the output data stored</span>
<span class="sd">        in the class. For every pixel in each image, the class&#39;s pixelChecker is used to compare them.</span>
<span class="sd">        If the check returns true, the class&#39;s pixelActor is called to act on the pixels. For every acted on</span>
<span class="sd">        pixel pair, the method&#39;s counter is increased. This count is returned as a statistic.</span>

<span class="sd">        `img`: An image file to be merged onto the class&#39;s image.</span>

<span class="sd">        `return`: The number of modified pixels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">compareimage</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">comparedata</span> <span class="o">=</span> <span class="n">compareimage</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

        <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="n">counter</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">counter</span>

    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        This method converts any number of given images to RGBA color format. Pixel comparision is done via</span>
<span class="sd">        the rgb values, and requires the images to be in that format. The converted files are saved to</span>
<span class="sd">        a Converts folder as to not fill ones input folder with temporary files.</span>

<span class="sd">        `images`: The images that need to be converted.</span>

<span class="sd">        `return`: A list of file paths leading to the convert images, which can passed to further methods.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
            <span class="n">im</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGBA&quot;</span><span class="p">)</span>

            <span class="n">split</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
            <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">split</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;/Converts/&#39;</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>

            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Shows the image if an image is given, otherwise defaults to the class&#39;s image.</span>

<span class="sd">        `image`: The image to show, defaults to the image contained in the class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span><span class="p">:</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span>
        <span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Saves an image to disk. The image can be specified, other wise the class&#39;s image is defaulted to.</span>
<span class="sd">        The outfile can also be optionally specified.</span>

<span class="sd">        `image`: Defaults to the class&#39;s image unless specified. The image to be saved.</span>

<span class="sd">        `outfile`: The location to save to. Defaults to the class&#39;s output path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span><span class="p">:</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">outfile</span><span class="p">:</span> <span class="n">outfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span>
        <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">printDiffSame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        `Author`: Bill Clark</span>

<span class="sd">        Prints the different pixel percentage and the same pixel percentage.</span>

<span class="sd">        `counter`: The count of changed pixels in a merge operation. Obtained from checkandact.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="s2">&quot;Different Pixels:&quot;</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">round</span><span class="p">((</span><span class="n">counter</span><span class="o">/</span><span class="mf">360000.</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="s2">&quot; Same Pixels:&quot;</span><span class="p">,</span> \
            <span class="mi">360000</span><span class="o">-</span><span class="n">counter</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">round</span><span class="p">(((</span><span class="mi">360000</span><span class="o">-</span><span class="n">counter</span><span class="p">)</span><span class="o">/</span><span class="mf">360000.</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#Image-Fusion.Merging.ImageMerge.Merger">Merger</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="Image-Fusion.Merging.ImageMerge.Merger.autoSave" class="name">var <span class="ident">autoSave</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Merging.ImageMerge.Merger.initialized" class="name">var <span class="ident">initialized</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Merging.ImageMerge.Merger.mergedFiles" class="name">var <span class="ident">mergedFiles</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Merging.ImageMerge.Merger.outfile" class="name">var <span class="ident">outfile</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Merging.ImageMerge.Merger.processor" class="name">var <span class="ident">processor</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, outfile)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>A merger is a class that allows for a number of images to merged sequentially. It is designed to
merge each image incrementally, outputting to an outfile when requested. There are a variety of
ways to preform the merges for different circumstance. The class contains an autosave feature that
will save the image after each merge, which is defaulted to off. There is also a contained PixelChecker
and PixelActor, which define how the merges process.
Merger works off an internal state. Each merge operation (irrelevant of number merged in that operation)
changes the state of the output data. Merge and MergeAs change the state permanently. ExportMerge and
TestMerge do not change the state of the output data.</p>
<p><code>outfile</code>: The file address to save the output to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.__init__', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    A merger is a class that allows for a number of images to merged sequentially. It is designed to</span>
<span class="sd">    merge each image incrementally, outputting to an outfile when requested. There are a variety of</span>
<span class="sd">    ways to preform the merges for different circumstance. The class contains an autosave feature that</span>
<span class="sd">    will save the image after each merge, which is defaulted to off. There is also a contained PixelChecker</span>
<span class="sd">    and PixelActor, which define how the merges process.</span>
<span class="sd">    Merger works off an internal state. Each merge operation (irrelevant of number merged in that operation)</span>
<span class="sd">    changes the state of the output data. Merge and MergeAs change the state permanently. ExportMerge and</span>
<span class="sd">    TestMerge do not change the state of the output data.</span>
<span class="sd">    `outfile`: The file address to save the output to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span> <span class="o">=</span> <span class="n">outfile</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">processor</span> <span class="o">=</span> <span class="n">PixelProcess</span><span class="o">.</span><span class="n">PixelRemote</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mergedFiles</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.checkAndAct">
    <p>def <span class="ident">checkAndAct</span>(</p><p>self, img)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>The primary action method. This method takes an image and merges it onto the output data stored
in the class. For every pixel in each image, the class's pixelChecker is used to compare them.
If the check returns true, the class's pixelActor is called to act on the pixels. For every acted on
pixel pair, the method's counter is increased. This count is returned as a statistic.</p>
<p><code>img</code>: An image file to be merged onto the class's image.</p>
<p><code>return</code>: The number of modified pixels.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.checkAndAct', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.checkAndAct" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">checkAndAct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    The primary action method. This method takes an image and merges it onto the output data stored</span>
<span class="sd">    in the class. For every pixel in each image, the class&#39;s pixelChecker is used to compare them.</span>
<span class="sd">    If the check returns true, the class&#39;s pixelActor is called to act on the pixels. For every acted on</span>
<span class="sd">    pixel pair, the method&#39;s counter is increased. This count is returned as a statistic.</span>
<span class="sd">    `img`: An image file to be merged onto the class&#39;s image.</span>
<span class="sd">    `return`: The number of modified pixels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">compareimage</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">comparedata</span> <span class="o">=</span> <span class="n">compareimage</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="n">counter</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">counter</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.convert">
    <p>def <span class="ident">convert</span>(</p><p>self, *images)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>This method converts any number of given images to RGBA color format. Pixel comparision is done via
the rgb values, and requires the images to be in that format. The converted files are saved to
a Converts folder as to not fill ones input folder with temporary files.</p>
<p><code>images</code>: The images that need to be converted.</p>
<p><code>return</code>: A list of file paths leading to the convert images, which can passed to further methods.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.convert', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.convert" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    This method converts any number of given images to RGBA color format. Pixel comparision is done via</span>
<span class="sd">    the rgb values, and requires the images to be in that format. The converted files are saved to</span>
<span class="sd">    a Converts folder as to not fill ones input folder with temporary files.</span>
<span class="sd">    `images`: The images that need to be converted.</span>
<span class="sd">    `return`: A list of file paths leading to the convert images, which can passed to further methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGBA&quot;</span><span class="p">)</span>
        <span class="n">split</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">split</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;/Converts/&#39;</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
        <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.cropFind">
    <p>def <span class="ident">cropFind</span>(</p><p>self, outfile, smallImage)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Finds where a subimage of the tracked image fits in the tracked image.
This is done by comparing the sides of the outfile image with each
row of pixels in the tracked image. This acommodates for rotation. The match
is as close to exact as is practical. Saving and cropping images can sometimes
cause small differences such as 1 or or 2 values.
The if result not none section can be replaced later to change what is done
with the result.</p>
<p><code>outfile</code>: path to save the merged crop to.</p>
<p><code>smallImage</code>: A subimage of the tracked image.</p>
<p><code>return</code>: None if no match is found, the result is one is.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.cropFind', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.cropFind" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cropFind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">smallImage</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    Finds where a subimage of the tracked image fits in the tracked image.</span>
<span class="sd">    This is done by comparing the sides of the outfile image with each</span>
<span class="sd">    row of pixels in the tracked image. This acommodates for rotation. The match</span>
<span class="sd">    is as close to exact as is practical. Saving and cropping images can sometimes</span>
<span class="sd">    cause small differences such as 1 or or 2 values.</span>
<span class="sd">    The if result not none section can be replaced later to change what is done</span>
<span class="sd">    with the result.</span>
<span class="sd">    `outfile`: path to save the merged crop to.</span>
<span class="sd">    `smallImage`: A subimage of the tracked image.</span>
<span class="sd">    `return`: None if no match is found, the result is one is.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">smim</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">smallImage</span><span class="p">)</span>
    <span class="n">smdata</span> <span class="o">=</span> <span class="n">smim</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
    <span class="n">xlen</span><span class="p">,</span> <span class="n">ylen</span> <span class="o">=</span> <span class="n">smim</span><span class="o">.</span><span class="n">size</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">None</span> 
    <span class="n">sides</span> <span class="o">=</span> <span class="p">[[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]]</span>
    <span class="n">high</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xlen</span><span class="p">,</span> <span class="n">ylen</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">high</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">xlen</span><span class="p">:</span>
            <span class="n">sides</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
            <span class="n">sides</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[((</span><span class="n">xlen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="n">ylen</span><span class="o">-</span><span class="mi">1</span><span class="p">)])</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ylen</span><span class="p">:</span>
            <span class="n">sides</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[(</span><span class="n">xlen</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">)])</span>
            <span class="n">sides</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">smdata</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">ylen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">i</span><span class="p">)])</span>
    <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="n">sides</span><span class="p">:</span>
        <span class="n">side</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">side</span><span class="p">)</span>
    <span class="n">sides</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">sides</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">row1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowSizer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">y</span><span class="p">,[],</span><span class="n">xlen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">row2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rowSizer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">y</span><span class="p">,[],</span><span class="n">ylen</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">xlen</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="c1">#Top and Bottom check.</span>
                <span class="n">row1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">row1</span><span class="p">),</span><span class="n">y</span><span class="p">])</span>
                <span class="n">flag</span><span class="p">,</span> <span class="n">if0</span><span class="p">,</span> <span class="n">if2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compareRow</span><span class="p">(</span><span class="n">sides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sides</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">row1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if0</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if2</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">ylen</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">row2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">row2</span><span class="p">),</span><span class="n">y</span><span class="p">])</span>
                <span class="n">flag</span><span class="p">,</span> <span class="n">if1</span><span class="p">,</span> <span class="n">if3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compareRow</span><span class="p">(</span><span class="n">sides</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sides</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">row2</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if1</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">flag</span> <span class="ow">and</span> <span class="n">if3</span><span class="p">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">3</span>
            <span class="k">del</span> <span class="n">row1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">row2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;RGBA&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">imdata</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">smim</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">smim</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="n">newx</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span>
                <span class="n">newy</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">y</span>
                <span class="n">imdata</span><span class="p">[</span><span class="n">newx</span><span class="p">,</span> <span class="n">newy</span><span class="p">]</span> <span class="o">=</span> <span class="n">smdata</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span>
        <span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">exportMerge</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.exportMerge">
    <p>def <span class="ident">exportMerge</span>(</p><p>self, outfile, *images)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Export merge is a merge operation that does not change state. Unlike TestMerge, this merge will
write the temporary image to a given outfile. If the outfile is None, export will not write anything.
This side effect is how TestMerge works. Export merge turns off the autosave feature to be sure that
doesn't modify the main output file.</p>
<p><code>images</code>: the image paths to be merged.</p>
<p><code>outfile</code>: Where to set the new output path to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.exportMerge', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.exportMerge" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">exportMerge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    Export merge is a merge operation that does not change state. Unlike TestMerge, this merge will</span>
<span class="sd">    write the temporary image to a given outfile. If the outfile is None, export will not write anything.</span>
<span class="sd">    This side effect is how TestMerge works. Export merge turns off the autosave feature to be sure that</span>
<span class="sd">    doesn&#39;t modify the main output file.</span>
<span class="sd">    `images`: the image paths to be merged.</span>
<span class="sd">    `outfile`: Where to set the new output path to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Make a backup of the outimage if one has been initialized.</span>
    <span class="n">orig</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span><span class="p">:</span> <span class="n">orig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># Saves the autosave state and merges.</span>
    <span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="o">*</span><span class="n">images</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span> <span class="o">=</span> <span class="n">state</span>
    <span class="c1"># If the outfile is None, show the image and continue. If an outfile exists, save the image instead.</span>
    <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>  <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="c1"># If the back up was made, restore the status to before the last merge. Else, reset the object.</span>
    <span class="k">if</span> <span class="n">orig</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span> <span class="o">=</span> <span class="n">orig</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span> <span class="o">=</span> <span class="n">Merger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outfile</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.merge">
    <p>def <span class="ident">merge</span>(</p><p>self, *images)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>The main merge method. All other variants actually call this merge at some point in execution. The
method calls setup if no merges have been done prior so that merges can be done against the first.
This uses the checkandact method to operate on each image given to it. That method covers all the
actual pixel processing.
When debug is enabled, merge prints the percentage of different and same pixels.</p>
<p><code>images</code>: Any number of image paths to merge together.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.merge', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.merge" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    The main merge method. All other variants actually call this merge at some point in execution. The</span>
<span class="sd">    method calls setup if no merges have been done prior so that merges can be done against the first.</span>
<span class="sd">    This uses the checkandact method to operate on each image given to it. That method covers all the</span>
<span class="sd">    actual pixel processing.</span>
<span class="sd">    When debug is enabled, merge prints the percentage of different and same pixels.</span>
<span class="sd">    `images`: Any number of image paths to merge together.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">images</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
            <span class="n">changed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkAndAct</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mergedFiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">printDiffSame</span><span class="p">(</span><span class="n">changed</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.mergeAs">
    <p>def <span class="ident">mergeAs</span>(</p><p>self, outfile, *images)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>This is a variant of the main merge method. It changes the outfile permanently, functioning like
a save as option. Otherwise it differs completely to merge.</p>
<p><code>images</code>: the image paths to be merged.</p>
<p><code>outfile</code>: Where to set the new output path to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.mergeAs', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.mergeAs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">mergeAs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    This is a variant of the main merge method. It changes the outfile permanently, functioning like</span>
<span class="sd">    a save as option. Otherwise it differs completely to merge.</span>
<span class="sd">    `images`: the image paths to be merged.</span>
<span class="sd">    `outfile`: Where to set the new output path to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span> <span class="o">=</span> <span class="n">outfile</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="o">*</span><span class="n">images</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.printDiffSame">
    <p>def <span class="ident">printDiffSame</span>(</p><p>self, counter)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Prints the different pixel percentage and the same pixel percentage.</p>
<p><code>counter</code>: The count of changed pixels in a merge operation. Obtained from checkandact.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.printDiffSame', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.printDiffSame" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">printDiffSame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    Prints the different pixel percentage and the same pixel percentage.</span>
<span class="sd">    `counter`: The count of changed pixels in a merge operation. Obtained from checkandact.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">print</span> <span class="s2">&quot;Different Pixels:&quot;</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">round</span><span class="p">((</span><span class="n">counter</span><span class="o">/</span><span class="mf">360000.</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="s2">&quot; Same Pixels:&quot;</span><span class="p">,</span> \
        <span class="mi">360000</span><span class="o">-</span><span class="n">counter</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">round</span><span class="p">(((</span><span class="mi">360000</span><span class="o">-</span><span class="n">counter</span><span class="p">)</span><span class="o">/</span><span class="mf">360000.</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.save">
    <p>def <span class="ident">save</span>(</p><p>self, image=None, outfile=None)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Saves an image to disk. The image can be specified, other wise the class's image is defaulted to.
The outfile can also be optionally specified.</p>
<p><code>image</code>: Defaults to the class's image unless specified. The image to be saved.</p>
<p><code>outfile</code>: The location to save to. Defaults to the class's output path.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.save', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    Saves an image to disk. The image can be specified, other wise the class&#39;s image is defaulted to.</span>
<span class="sd">    The outfile can also be optionally specified.</span>
<span class="sd">    `image`: Defaults to the class&#39;s image unless specified. The image to be saved.</span>
<span class="sd">    `outfile`: The location to save to. Defaults to the class&#39;s output path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span><span class="p">:</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">outfile</span><span class="p">:</span> <span class="n">outfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span>
    <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.setup">
    <p>def <span class="ident">setup</span>(</p><p>self, file)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>This method is called if a merge is activated and no prior merges have been done. It sets the image to
be merged as the output result, as nothing cannot be merged with an image object. This method is
internal and does not need to be called by a user. It is called if necessary from the merge methods.</p>
<p><code>file</code>: A path to an image to initialize the Merge with.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.setup', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.setup" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    This method is called if a merge is activated and no prior merges have been done. It sets the image to</span>
<span class="sd">    be merged as the output result, as nothing cannot be merged with an image object. This method is</span>
<span class="sd">    internal and does not need to be called by a user. It is called if necessary from the merge methods.</span>
<span class="sd">    `file`: A path to an image to initialize the Merge with.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">outdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSave</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.show">
    <p>def <span class="ident">show</span>(</p><p>self, image=None)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>Shows the image if an image is given, otherwise defaults to the class's image.</p>
<p><code>image</code>: The image to show, defaults to the image contained in the class.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.show', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    Shows the image if an image is given, otherwise defaults to the class&#39;s image.</span>
<span class="sd">    `image`: The image to show, defaults to the image contained in the class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span><span class="p">:</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outimage</span>
    <span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Merging.ImageMerge.Merger.testMerge">
    <p>def <span class="ident">testMerge</span>(</p><p>self, *images)</p>
    </div>
    

    
  
    <div class="desc"><p><code>Author</code>: Bill Clark</p>
<p>A test merge is a merge that doesn't save state. Each call to merge changes the internal data.
In the case a user wants to see the result of a merge without modifying the data, test merge will
do the job. Test merge is actually a call to exportmerge taking advantage of it's outfile variable.</p>
<p><code>images</code>: Any number of image paths to be merged.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Merging.ImageMerge.Merger.testMerge', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Merging.ImageMerge.Merger.testMerge" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">testMerge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Author`: Bill Clark</span>
<span class="sd">    A test merge is a merge that doesn&#39;t save state. Each call to merge changes the internal data.</span>
<span class="sd">    In the case a user wants to see the result of a merge without modifying the data, test merge will</span>
<span class="sd">    do the job. Test merge is actually a call to exportmerge taking advantage of it&#39;s outfile variable.</span>
<span class="sd">    `images`: Any number of image paths to be merged.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">exportMerge</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="o">*</span><span class="n">images</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
