<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>Image-Fusion.Distance.distance_finder API documentation</title>
    <meta name="description" content="" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.TAGS">TAGS</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.directory">directory</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.apply_distance_as_text">apply_distance_as_text</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.main">main</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.parse_args">parse_args</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.run_me">run_me</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.text_on_image">text_on_image</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#Image-Fusion.Distance.distance_finder.Linear">Linear</a></span>
        
          
  <ul>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Linear.__init__">__init__</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Linear.config">config</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Linear.find_distance">find_distance</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Linear.find_key">find_key</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Linear.get_exif">get_exif</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Linear.get_object_height_px">get_object_height_px</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#Image-Fusion.Distance.distance_finder.Macro">Macro</a></span>
        
          
  <ul>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Macro.__init__">__init__</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Macro.add">add</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Macro.run">run</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#Image-Fusion.Distance.distance_finder.Primary">Primary</a></span>
        
          
  <ul>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Primary.__init__">__init__</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Primary.config">config</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Primary.find_distance">find_distance</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Primary.find_key">find_key</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Primary.get_exif">get_exif</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Primary.get_object_height_px">get_object_height_px</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#Image-Fusion.Distance.distance_finder.Quaternary">Quaternary</a></span>
        
          
  <ul>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Quaternary.__init__">__init__</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Quaternary.config">config</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Quaternary.find_distance">find_distance</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Quaternary.find_key">find_key</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Quaternary.get_exif">get_exif</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Quaternary.get_object_height_px">get_object_height_px</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#Image-Fusion.Distance.distance_finder.Secondary">Secondary</a></span>
        
          
  <ul>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Secondary.__init__">__init__</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Secondary.config">config</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Secondary.find_distance">find_distance</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Secondary.find_key">find_key</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Secondary.get_exif">get_exif</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Secondary.get_object_height_px">get_object_height_px</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></span>
        
          
  <ul>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Solution.__init__">__init__</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Solution.config">config</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Solution.find_distance">find_distance</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Solution.find_key">find_key</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Solution.get_exif">get_exif</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Solution.get_object_height_px">get_object_height_px</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#Image-Fusion.Distance.distance_finder.Tertiary">Tertiary</a></span>
        
          
  <ul>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Tertiary.__init__">__init__</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Tertiary.config">config</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Tertiary.find_distance">find_distance</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Tertiary.find_key">find_key</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Tertiary.get_exif">get_exif</a></li>
    <li class="mono"><a href="#Image-Fusion.Distance.distance_finder.Tertiary.get_object_height_px">get_object_height_px</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#Image-Fusion.Distance.distance_finder.color">color</a></span>
        
        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">Image-Fusion.Distance.distance_finder</span> module</h1>
  
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder" class="source">
    <div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span><span class="p">,</span> <span class="n">ImageFont</span>
<span class="kn">from</span> <span class="nn">PIL.ExifTags</span> <span class="kn">import</span> <span class="n">TAGS</span>
<span class="kn">import</span> <span class="nn">math</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">traceback</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">warnings</span><span class="o">,</span> <span class="nn">json</span><span class="o">,</span> <span class="nn">Console</span><span class="o">,</span> <span class="nn">argparse</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>


<span class="k">class</span> <span class="nc">color</span><span class="p">:</span>
   <span class="n">PURPLE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[95m&#39;</span>
   <span class="n">CYAN</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[96m&#39;</span>
   <span class="n">DARKCYAN</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[36m&#39;</span>
   <span class="n">BLUE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[94m&#39;</span>
   <span class="n">GREEN</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[92m&#39;</span>
   <span class="n">YELLOW</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[93m&#39;</span>
   <span class="n">RED</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[91m&#39;</span>
   <span class="n">BOLD</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[1m&#39;</span>
   <span class="n">UNDERLINE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[4m&#39;</span>
   <span class="n">END</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[0m&#39;</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">EXAMPLE ARGS:</span>
<span class="sd">--known_height_m 1.82 --methods P S T --base &quot;C:\Users\Bob S\PycharmProjects\Image-Fusion\Input\IMG_base.jpg&quot; --files &quot;C:\Users\Bob S\PycharmProjects\Image-Fusion\Input\IMG_two.jpg&quot; &quot;C:\Users\Bob S\PycharmProjects\Image-Fusion\Input\IMG_onehalf.jpg&quot; &quot;C:\Users\Bob S\PycharmProjects\Image-Fusion\Input\IMG_half.jpg&quot;</span>

<span class="sd">--known_height_m    = the actual height of the object whose distance is being sought, in meters</span>
<span class="sd">--methods           = the argument list of the methods chosen to be applied during the distance solving process, as denoted by the first letter of the name. comma delimited list</span>
<span class="sd">--base              = the base file, against which all subsequent files are compared for difference extraction and examination</span>
<span class="sd">--files             = the file(s) wherein the difference to be examined lies, must be at least one</span>

<span class="sd">ANOTHER COMMAND LINE EXAMPLE:</span>
<span class="sd">--known_height_m 0.124 --methods L --base &quot;C:\Users\Bob S\PycharmProjects\Image-Fusion\Input\IMG_base.jpg&quot; --files &quot;C:\Users\Bob S\PycharmProjects\Image-Fusion\Input\IMG_two.jpg&quot; &quot;C:\Users\Bob S\PycharmProjects\Image-Fusion\Input\IMG_half.jpg&quot;</span>

<span class="sd">ANOTHER EXAMPLE USING COMMAND LINE:</span>
<span class="sd">--known_height_m 1.82 --methods L P --base &quot;C:\Users\Bob S\PycharmProjects\Image-Fusion\Input\One Visual.jpg&quot; --files &quot;C:\Users\Bob S\PycharmProjects\Image-Fusion\Input\One Infrared.jpg&quot;</span>

<span class="sd">INDEPENDENT CALL EXAMPLE:</span>
<span class="sd">procedure = Primary(base_file=base.jpg, obj_file=input.jpg, known_height=1.82)</span>
<span class="sd">procedure.find_distance()</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">__file__</span><span class="p">)))</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents one solution given a single case of image distance finding.</span>
<span class="sd">    Given the parametrized vargs, index 1: image to be examined, and index 2: the known height in meters of highlighted object,</span>
<span class="sd">    The solution&#39;s constructor and find distance command will return the distance of the object highlighted in the image</span>
<span class="sd">    Four variations of this task exist, The primary, Secondary, Tertiary, and Quaternary.</span>
<span class="sd">    Each works based on the capability of the pre-conditioned machine (Primary), or as fail-safe, the exif tags of the test image (Secondary, Tertiary, and Quaternary).</span>
<span class="sd">    The Primary reads in from the calib_info file, the calibrated info used to find the focal length and the focal length determined,</span>
<span class="sd">    then using trigonometric principals of similar angles, the distance of the object, whose height is known, is found.</span>
<span class="sd">    The Secondary, and Tertiary methods use the exif tags to find the focal length of the lens in the camera that was used, and apply that focal length to the trigonometry.</span>
<span class="sd">    The final method, investigates the tags for a special &#39;subject distance&#39; tag that assumes the accurate region of focus and returns that distance fom the camera</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for one solution object.</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="n">base_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span> <span class="o">=</span> <span class="n">obj_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">=</span> <span class="n">known_height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;cameras.json&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_file</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method used for latent assignment of crucial fields, before running investigative process</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        `return` the instance of class &#39;self&#39; that now holds states for aforementioned fields</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="n">base_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span> <span class="o">=</span> <span class="n">obj_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">=</span> <span class="n">known_height</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method should will be finished to find the height of the found object in pixels</span>
<span class="sd">        to be used essential to every distance method</span>

<span class="sd">        `path` the path to the image file being investigated</span>
<span class="sd">        `return` (obj_height, img_height) the height of the object in px, and the height of the image in pixels</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># the following are console commands to employ image merge</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
        <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span>

        <span class="n">consolas</span> <span class="o">=</span> <span class="n">Console</span><span class="o">.</span><span class="n">Console</span><span class="p">(</span><span class="s1">&#39;Output/ImF.png&#39;</span><span class="p">)</span>
        <span class="n">consolas</span><span class="o">.</span><span class="n">do_extractremote</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="n">consolas</span><span class="o">.</span><span class="n">do_redhighlight</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="n">consolas</span><span class="o">.</span><span class="n">do_colordiff</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>

        <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">base_file</span><span class="p">)</span>
        <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>

        <span class="n">consolas</span><span class="o">.</span><span class="n">do_gengroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="n">consolas</span><span class="o">.</span><span class="n">do_countsortgroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">consolas</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">first</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">img_height</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">y</span>

    <span class="k">def</span> <span class="nf">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to return the exif tags of the file at path</span>

<span class="sd">        `path` the path to local file that is opened and parsed for exif tags</span>
<span class="sd">        `return` ret, the dictionary of all tags and their values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">_getexif</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">decoded</span> <span class="o">=</span> <span class="n">TAGS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
            <span class="n">ret</span><span class="p">[</span><span class="n">decoded</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">find_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eq_focal_len</span><span class="p">,</span> <span class="n">act_focal_len</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info</span>
<span class="sd">        Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</span>

<span class="sd">        crop factor = 35mm eq / actual focal length</span>

<span class="sd">        NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor</span>
<span class="sd">        crop factor will fall with +- 0.3 units of the desired key to yield the result</span>

<span class="sd">        :param eq_focal_len: 35 mm equivalent focal length</span>
<span class="sd">        :param act_focal_len: actual focal length in mm</span>
<span class="sd">        :return: the key to be used for later dictionary indexing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">global</span> <span class="n">key</span>
        <span class="n">crop_fact</span> <span class="o">=</span> <span class="n">eq_focal_len</span> <span class="o">/</span> <span class="n">act_focal_len</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">&gt;</span> <span class="n">crop_fact</span> <span class="ow">and</span> <span class="n">v</span><span class="p">[</span>
                <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.3</span> <span class="o">&lt;</span> <span class="n">crop_fact</span><span class="p">:</span>  <span class="c1"># If calculated crop factor is within +- 0.3 units of the known, then it is accepted</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        inherited method to be used by each subclass in a particular way</span>

<span class="sd">        `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">                dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">                dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Primary</span><span class="p">(</span><span class="n">Solution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The described primary method of finding object distance</span>
<span class="sd">    Requires config file (calib_info) to be established for accurate functionality</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for Primary method of execution.</span>

<span class="sd">        Note the extraction of info from the calibration json, calib_info, is  performed here. Should this procedure fail, the error will be printer but the object still constructed</span>
<span class="sd">        It will exist but it will not be functional, unless the calibration is successfully executed in the __init__</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info.json&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;focal_len&quot;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ke</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;WARNING no focal length found, primary method will fail.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ke</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method executes the tasks in order to find the distance of the object of the merge highlight</span>
<span class="sd">        The differentiating factor that delineates this method from Secondary and Tertiary is the use of calibrated focal length</span>

<span class="sd">        Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.</span>
<span class="sd">        This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</span>

<span class="sd">        `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">                dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">                dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>

            <span class="n">test_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan</span><span class="p">(</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span><span class="p">)</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">test_angle</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Primary Method Failed.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Secondary</span><span class="p">(</span><span class="n">Solution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The described secondary method of finding object distance</span>
<span class="sd">    Requires only proper file format, with exif tags, to run appropriately</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for Secondary method of execution.</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method executes the tasks in order to find the distance of the object of the merge highlight</span>

<span class="sd">        Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.</span>
<span class="sd">        This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</span>

<span class="sd">        `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">                dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">                dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
            <span class="n">pix_pct</span> <span class="o">=</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>

            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_key</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLengthIn35mmFilm&#39;</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>

            <span class="n">test_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan</span><span class="p">(</span><span class="n">pix_pct</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span><span class="p">)</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">test_angle</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Secondary Method Failed.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Tertiary</span><span class="p">(</span><span class="n">Solution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The penultimate method of finding object distance</span>
<span class="sd">    Requires only proper file format, with exif tags, to run appropriately</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for Tertiary method of execution.</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method executes the tasks in order to find the distance of the object of the merge highlight</span>

<span class="sd">        Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.</span>
<span class="sd">        This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</span>

<span class="sd">        `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">                dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">                dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>

            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_key</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLengthIn35mmFilm&#39;</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>

            <span class="n">dist</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">*</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span>
                <span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Tertiary Method Failed.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Quaternary</span><span class="p">(</span><span class="n">Solution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The last method of finding object distance, characterized by unreliability</span>
<span class="sd">    Requires proper file format, with exif tags, as well as exif tag &#39;SubjectDistance&#39; and assumes the object is in field of focus</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for Quaternary method of execution.</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method investigates the exif tags to find the SubjectDistance tag that may reveal the concerning information</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)[</span><span class="s1">&#39;SubjectDistance&#39;</span><span class="p">]</span>  <span class="c1"># maybe useful, determined from center of focus in digital cameras</span>
            <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Quaternary Method Failed.&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Linear</span><span class="p">(</span><span class="n">Solution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The control method of finding object distance</span>
<span class="sd">    Requires that subject whose distance is being determined must be the object of calibration process.</span>
<span class="sd">    and pixel height of image in subject file and control height variable (height_object_in_question)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for Linear method of execution.</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info.json&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">known_height_px</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;control_object_height_px&quot;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ke</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;WARNING no control height in px found, method will fail.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ke</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">known_dist</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;dist_object_in_question&quot;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ke</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;WARNING no control distance found, method will fail.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ke</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method uses the linear relationship of heights to find the distance</span>

<span class="sd">        `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">                dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">                dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
            <span class="n">ppx_per_meter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_height_px</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">known_height_px</span> <span class="o">/</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_dist</span>
            <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Linear Method Failed.&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Macro</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class holds the capability of running several &#39;commands,&#39; as instances of subclasses, to be readily used in extension</span>
<span class="sd">    Stores list of &#39;methods&#39; using strategy pattern. the commands list holds object of the Solution class tha implement a find_distance method</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commands</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="p">:</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">dist</span><span class="p">,</span> <span class="n">loc_x</span><span class="p">,</span> <span class="n">loc_y</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">find_distance</span><span class="p">()</span>
            <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;Method&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
            <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;File&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">obj_file</span>
            <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;Distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist</span>
            <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;loc_x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loc_x</span>
            <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;loc_y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loc_y</span>
            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

<span class="k">def</span> <span class="nf">text_on_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Using ImageDraw, the image can be labeled with a name in the picture</span>

<span class="sd">    `image` image to be labeled</span>
<span class="sd">    `text` text tobe drawn on image</span>
<span class="sd">    `location` the pixel coordinates (x, y) that represent the position at which the text will be drawn</span>
<span class="sd">    `color` the color of the text in RGB format of the text being drawn</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="s2">&quot;arial.ttf&quot;</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
    <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img</span>

<span class="k">def</span> <span class="nf">apply_distance_as_text</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method as loop to apply the text to series of images</span>

<span class="sd">    `list` the list of images on which the text will be permanently drawn</span>
<span class="sd">    `return` the list of images, as path-names, where the modified images are stored</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">slideshow</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="n">image</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;File&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s1">&#39;Distance&#39;</span><span class="p">]),</span> <span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s1">&#39;loc_x&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;loc_y&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">25</span><span class="p">)</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">text_on_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">slideshow</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">slideshow</span>

<span class="k">def</span> <span class="nf">parse_args</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to parse args from command sys.args. Uses python.argparser</span>

<span class="sd">    `return` args, the list of parsed args as a argparser object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ap</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">ap</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--known_height_m&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the known height of the object being investigated, in meters&quot;</span><span class="p">)</span>
    <span class="n">ap</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--methods&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(P,S,T,Q, or L) the method(s) chosen to be applied for investigation, if none is chosen default is Linear&quot;</span><span class="p">)</span>
    <span class="n">ap</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--base&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;FILE&quot;</span><span class="p">,</span>
                    <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;base image file for image merge&quot;</span><span class="p">)</span>
    <span class="n">ap</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--files&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;FILE&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The list of files to be merged against base, the distance of the highlight in each will be found&quot;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">ap</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">args</span>

<span class="k">def</span> <span class="nf">run_me</span><span class="p">(</span><span class="n">known_height</span><span class="p">,</span> <span class="n">method_flags</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">infiles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    run me method for scripting usage</span>
<span class="sd">    for deployment usage see additional example args at file head</span>

<span class="sd">    most useful individual deployment example (see line 325-328)</span>
<span class="sd">    df = Macro(Primary(infile, known_height), Secondary(infile, known_height), Tertiary(infile, known_height))</span>

<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    `method_flags` the list of flags chosen to denote the choice of method used to solve (P - primary,S -secondary, etc.)</span>
<span class="sd">    `base_file` the base file against which all infiles will be checked and distance solved</span>
<span class="sd">    `infiles` the lis tof file being examined for difference, and determining distance</span>
<span class="sd">    `return` the list of results of upon execution</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">configs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;P&#39;</span><span class="p">:</span> <span class="n">Primary</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="n">Secondary</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="n">Tertiary</span><span class="p">,</span> <span class="s1">&#39;Q&#39;</span><span class="p">:</span> <span class="n">Quaternary</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">:</span> <span class="n">Linear</span><span class="p">}</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">Macro</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">flag</span> <span class="ow">in</span> <span class="n">method_flags</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">obj_file</span> <span class="ow">in</span> <span class="n">infiles</span><span class="p">:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">configs</span><span class="p">[</span><span class="n">flag</span><span class="o">.</span><span class="n">upper</span><span class="p">()](</span><span class="n">known_height</span><span class="o">=</span><span class="n">known_height</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="n">obj_file</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="n">base_file</span><span class="p">))</span>

    <span class="n">results</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main method, intended to parse args and perform operation in order</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">parse_args</span><span class="p">()</span>
    <span class="k">print</span> <span class="s1">&#39;Args:&#39;</span>
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
        <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>

    <span class="n">files</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">files</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">run_me</span><span class="p">(</span><span class="n">known_height</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">known_height_m</span><span class="p">,</span> <span class="n">method_flags</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">methods</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">base</span><span class="p">,</span><span class="n">infiles</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>

    <span class="c1"># print results</span>
    <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">.</span><span class="n">UNDERLINE</span><span class="p">,</span> <span class="s1">&#39;Results:&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="k">for</span> <span class="nb">dict</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">print</span> <span class="n">color</span><span class="o">.</span><span class="n">UNDERLINE</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">.</span><span class="n">END</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]:</span>
           <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">val</span>

    <span class="kn">import</span> <span class="nn">slideshow</span>
    <span class="n">slideshow</span><span class="o">.</span><span class="n">slideshow</span><span class="p">(</span><span class="n">apply_distance_as_text</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="n">main</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="Image-Fusion.Distance.distance_finder.TAGS" class="name">var <span class="ident">TAGS</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="Image-Fusion.Distance.distance_finder.directory" class="name">var <span class="ident">directory</span></p>
      
  
  <div class="source_cont">
</div>

      </div>

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.apply_distance_as_text">
    <p>def <span class="ident">apply_distance_as_text</span>(</p><p>list)</p>
    </div>
    

    
  
    <div class="desc"><p>Method as loop to apply the text to series of images</p>
<p><code>list</code> the list of images on which the text will be permanently drawn
<code>return</code> the list of images, as path-names, where the modified images are stored</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.apply_distance_as_text', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.apply_distance_as_text" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_distance_as_text</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method as loop to apply the text to series of images</span>

<span class="sd">    `list` the list of images on which the text will be permanently drawn</span>
<span class="sd">    `return` the list of images, as path-names, where the modified images are stored</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">slideshow</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="n">image</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;File&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s1">&#39;Distance&#39;</span><span class="p">]),</span> <span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s1">&#39;loc_x&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;loc_y&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">25</span><span class="p">)</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">text_on_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">slideshow</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">slideshow</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.main">
    <p>def <span class="ident">main</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Main method, intended to parse args and perform operation in order</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.main', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.main" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main method, intended to parse args and perform operation in order</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">parse_args</span><span class="p">()</span>
    <span class="k">print</span> <span class="s1">&#39;Args:&#39;</span>
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
        <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>

    <span class="n">files</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">files</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">run_me</span><span class="p">(</span><span class="n">known_height</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">known_height_m</span><span class="p">,</span> <span class="n">method_flags</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">methods</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">base</span><span class="p">,</span><span class="n">infiles</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>

    <span class="c1"># print results</span>
    <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">.</span><span class="n">UNDERLINE</span><span class="p">,</span> <span class="s1">&#39;Results:&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="k">for</span> <span class="nb">dict</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">print</span> <span class="n">color</span><span class="o">.</span><span class="n">UNDERLINE</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">.</span><span class="n">END</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]:</span>
           <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">val</span>

    <span class="kn">import</span> <span class="nn">slideshow</span>
    <span class="n">slideshow</span><span class="o">.</span><span class="n">slideshow</span><span class="p">(</span><span class="n">apply_distance_as_text</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.parse_args">
    <p>def <span class="ident">parse_args</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Method to parse args from command sys.args. Uses python.argparser</p>
<p><code>return</code> args, the list of parsed args as a argparser object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.parse_args', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.parse_args" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_args</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to parse args from command sys.args. Uses python.argparser</span>

<span class="sd">    `return` args, the list of parsed args as a argparser object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ap</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">ap</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--known_height_m&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the known height of the object being investigated, in meters&quot;</span><span class="p">)</span>
    <span class="n">ap</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--methods&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(P,S,T,Q, or L) the method(s) chosen to be applied for investigation, if none is chosen default is Linear&quot;</span><span class="p">)</span>
    <span class="n">ap</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--base&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;FILE&quot;</span><span class="p">,</span>
                    <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;base image file for image merge&quot;</span><span class="p">)</span>
    <span class="n">ap</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--files&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;FILE&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The list of files to be merged against base, the distance of the highlight in each will be found&quot;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">ap</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">args</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.run_me">
    <p>def <span class="ident">run_me</span>(</p><p>known_height, method_flags, base_file, infiles)</p>
    </div>
    

    
  
    <div class="desc"><p>run me method for scripting usage
for deployment usage see additional example args at file head</p>
<p>most useful individual deployment example (see line 325-328)
df = Macro(Primary(infile, known_height), Secondary(infile, known_height), Tertiary(infile, known_height))</p>
<p><code>known_height</code> the known height in meters of the object in the picture
<code>method_flags</code> the list of flags chosen to denote the choice of method used to solve (P - primary,S -secondary, etc.)
<code>base_file</code> the base file against which all infiles will be checked and distance solved
<code>infiles</code> the lis tof file being examined for difference, and determining distance
<code>return</code> the list of results of upon execution</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.run_me', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.run_me" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">run_me</span><span class="p">(</span><span class="n">known_height</span><span class="p">,</span> <span class="n">method_flags</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">infiles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    run me method for scripting usage</span>
<span class="sd">    for deployment usage see additional example args at file head</span>

<span class="sd">    most useful individual deployment example (see line 325-328)</span>
<span class="sd">    df = Macro(Primary(infile, known_height), Secondary(infile, known_height), Tertiary(infile, known_height))</span>

<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    `method_flags` the list of flags chosen to denote the choice of method used to solve (P - primary,S -secondary, etc.)</span>
<span class="sd">    `base_file` the base file against which all infiles will be checked and distance solved</span>
<span class="sd">    `infiles` the lis tof file being examined for difference, and determining distance</span>
<span class="sd">    `return` the list of results of upon execution</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">configs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;P&#39;</span><span class="p">:</span> <span class="n">Primary</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="n">Secondary</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="n">Tertiary</span><span class="p">,</span> <span class="s1">&#39;Q&#39;</span><span class="p">:</span> <span class="n">Quaternary</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">:</span> <span class="n">Linear</span><span class="p">}</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">Macro</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">flag</span> <span class="ow">in</span> <span class="n">method_flags</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">obj_file</span> <span class="ow">in</span> <span class="n">infiles</span><span class="p">:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">configs</span><span class="p">[</span><span class="n">flag</span><span class="o">.</span><span class="n">upper</span><span class="p">()](</span><span class="n">known_height</span><span class="o">=</span><span class="n">known_height</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="n">obj_file</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="n">base_file</span><span class="p">))</span>

    <span class="n">results</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.text_on_image">
    <p>def <span class="ident">text_on_image</span>(</p><p>image, text, size=20, location=(0, 0), color=(255, 255, 255))</p>
    </div>
    

    
  
    <div class="desc"><p>Using ImageDraw, the image can be labeled with a name in the picture</p>
<p><code>image</code> image to be labeled
<code>text</code> text tobe drawn on image
<code>location</code> the pixel coordinates (x, y) that represent the position at which the text will be drawn
<code>color</code> the color of the text in RGB format of the text being drawn</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.text_on_image', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.text_on_image" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">text_on_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Using ImageDraw, the image can be labeled with a name in the picture</span>

<span class="sd">    `image` image to be labeled</span>
<span class="sd">    `text` text tobe drawn on image</span>
<span class="sd">    `location` the pixel coordinates (x, y) that represent the position at which the text will be drawn</span>
<span class="sd">    `color` the color of the text in RGB format of the text being drawn</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="s2">&quot;arial.ttf&quot;</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
    <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img</span>
</pre></div>

  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="Image-Fusion.Distance.distance_finder.Linear" class="name">class <span class="ident">Linear</span></p>
      
  
    <div class="desc"><p>The control method of finding object distance
Requires that subject whose distance is being determined must be the object of calibration process.
and pixel height of image in subject file and control height variable (height_object_in_question)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Linear', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Linear" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Linear</span><span class="p">(</span><span class="n">Solution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The control method of finding object distance</span>
<span class="sd">    Requires that subject whose distance is being determined must be the object of calibration process.</span>
<span class="sd">    and pixel height of image in subject file and control height variable (height_object_in_question)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for Linear method of execution.</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info.json&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">known_height_px</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;control_object_height_px&quot;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ke</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;WARNING no control height in px found, method will fail.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ke</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">known_dist</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;dist_object_in_question&quot;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ke</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;WARNING no control distance found, method will fail.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ke</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method uses the linear relationship of heights to find the distance</span>

<span class="sd">        `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">                dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">                dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
            <span class="n">ppx_per_meter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_height_px</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">known_height_px</span> <span class="o">/</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_dist</span>
            <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Linear Method Failed.&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#Image-Fusion.Distance.distance_finder.Linear">Linear</a></li>
          <li><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Linear.base_file" class="name">var <span class="ident">base_file</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.base_file">base_file</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Linear.focal_len" class="name">var <span class="ident">focal_len</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.focal_len">focal_len</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Linear.height_object_in_question" class="name">var <span class="ident">height_object_in_question</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.height_object_in_question">height_object_in_question</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Linear.obj_file" class="name">var <span class="ident">obj_file</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.obj_file">obj_file</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Linear.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, base_file=None, obj_file=None, known_height=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.__init__">__init__</a></code>
    </p>

    
  
    <div class="desc"><p>constructor for Linear method of execution.</p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Linear.__init__', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Linear.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor for Linear method of execution.</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info.json&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">known_height_px</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;control_object_height_px&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ke</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;WARNING no control height in px found, method will fail.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ke</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">known_dist</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;dist_object_in_question&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ke</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;WARNING no control distance found, method will fail.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ke</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Linear.config">
    <p>def <span class="ident">config</span>(</p><p>self, base_file, obj_file, known_height)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.config">config</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Method used for latent assignment of crucial fields, before running investigative process</p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture
<code>return</code> the instance of class 'self' that now holds states for aforementioned fields</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Linear.config', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Linear.config" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method used for latent assignment of crucial fields, before running investigative process</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    `return` the instance of class &#39;self&#39; that now holds states for aforementioned fields</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="n">base_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span> <span class="o">=</span> <span class="n">obj_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">=</span> <span class="n">known_height</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Linear.find_distance">
    <p>def <span class="ident">find_distance</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.find_distance">find_distance</a></code>
    </p>

    
  
    <div class="desc"><p>This method uses the linear relationship of heights to find the distance</p>
<p><code>return</code> dist - the discovered distance that is the result of the procedure
        dimension[2] - the location of x coordinates that are the far left and right most pixels of difference
        dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Linear.find_distance', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Linear.find_distance" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method uses the linear relationship of heights to find the distance</span>
<span class="sd">    `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">            dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">            dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
        <span class="n">ppx_per_meter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_height_px</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">known_height_px</span> <span class="o">/</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">known_dist</span>
        <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Linear Method Failed.&quot;</span><span class="p">)</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Linear.find_key">
    <p>def <span class="ident">find_key</span>(</p><p>self, eq_focal_len, act_focal_len)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.find_key">find_key</a></code>
    </p>

    
  
    <div class="desc inherited"><p>This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info
Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</p>
<p>crop factor = 35mm eq / actual focal length</p>
<p>NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor
crop factor will fall with +- 0.3 units of the desired key to yield the result</p>
<p>:param eq_focal_len: 35 mm equivalent focal length
:param act_focal_len: actual focal length in mm
:return: the key to be used for later dictionary indexing</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Linear.find_key', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Linear.find_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eq_focal_len</span><span class="p">,</span> <span class="n">act_focal_len</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info</span>
<span class="sd">    Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</span>
<span class="sd">    crop factor = 35mm eq / actual focal length</span>
<span class="sd">    NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor</span>
<span class="sd">    crop factor will fall with +- 0.3 units of the desired key to yield the result</span>
<span class="sd">    :param eq_focal_len: 35 mm equivalent focal length</span>
<span class="sd">    :param act_focal_len: actual focal length in mm</span>
<span class="sd">    :return: the key to be used for later dictionary indexing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">key</span>
    <span class="n">crop_fact</span> <span class="o">=</span> <span class="n">eq_focal_len</span> <span class="o">/</span> <span class="n">act_focal_len</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">&gt;</span> <span class="n">crop_fact</span> <span class="ow">and</span> <span class="n">v</span><span class="p">[</span>
            <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.3</span> <span class="o">&lt;</span> <span class="n">crop_fact</span><span class="p">:</span>  <span class="c1"># If calculated crop factor is within +- 0.3 units of the known, then it is accepted</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Linear.get_exif">
    <p>def <span class="ident">get_exif</span>(</p><p>self, path)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.get_exif">get_exif</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Method to return the exif tags of the file at path</p>
<p><code>path</code> the path to local file that is opened and parsed for exif tags
<code>return</code> ret, the dictionary of all tags and their values</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Linear.get_exif', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Linear.get_exif" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to return the exif tags of the file at path</span>
<span class="sd">    `path` the path to local file that is opened and parsed for exif tags</span>
<span class="sd">    `return` ret, the dictionary of all tags and their values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">_getexif</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">decoded</span> <span class="o">=</span> <span class="n">TAGS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">ret</span><span class="p">[</span><span class="n">decoded</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Linear.get_object_height_px">
    <p>def <span class="ident">get_object_height_px</span>(</p><p>self, base_file, obj_file)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.get_object_height_px">get_object_height_px</a></code>
    </p>

    
  
    <div class="desc inherited"><p>This method should will be finished to find the height of the found object in pixels
to be used essential to every distance method</p>
<p><code>path</code> the path to the image file being investigated
<code>return</code> (obj_height, img_height) the height of the object in px, and the height of the image in pixels</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Linear.get_object_height_px', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Linear.get_object_height_px" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method should will be finished to find the height of the found object in pixels</span>
<span class="sd">    to be used essential to every distance method</span>
<span class="sd">    `path` the path to the image file being investigated</span>
<span class="sd">    `return` (obj_height, img_height) the height of the object in px, and the height of the image in pixels</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># the following are console commands to employ image merge</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span>
    <span class="n">consolas</span> <span class="o">=</span> <span class="n">Console</span><span class="o">.</span><span class="n">Console</span><span class="p">(</span><span class="s1">&#39;Output/ImF.png&#39;</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_extractremote</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_redhighlight</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_colordiff</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">base_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_gengroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_countsortgroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">consolas</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">first</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">img_height</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">y</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="Image-Fusion.Distance.distance_finder.Macro" class="name">class <span class="ident">Macro</span></p>
      
  
    <div class="desc"><p>This class holds the capability of running several 'commands,' as instances of subclasses, to be readily used in extension
Stores list of 'methods' using strategy pattern. the commands list holds object of the Solution class tha implement a find_distance method</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Macro', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Macro" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Macro</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class holds the capability of running several &#39;commands,&#39; as instances of subclasses, to be readily used in extension</span>
<span class="sd">    Stores list of &#39;methods&#39; using strategy pattern. the commands list holds object of the Solution class tha implement a find_distance method</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commands</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="p">:</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">dist</span><span class="p">,</span> <span class="n">loc_x</span><span class="p">,</span> <span class="n">loc_y</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">find_distance</span><span class="p">()</span>
            <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;Method&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
            <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;File&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">obj_file</span>
            <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;Distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist</span>
            <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;loc_x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loc_x</span>
            <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;loc_y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loc_y</span>
            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#Image-Fusion.Distance.distance_finder.Macro">Macro</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Macro.commands" class="name">var <span class="ident">commands</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Macro.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Macro.__init__', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Macro.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">commands</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Macro.add">
    <p>def <span class="ident">add</span>(</p><p>self, command)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Macro.add', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Macro.add" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Macro.run">
    <p>def <span class="ident">run</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Macro.run', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Macro.run" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="p">:</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">dist</span><span class="p">,</span> <span class="n">loc_x</span><span class="p">,</span> <span class="n">loc_y</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">find_distance</span><span class="p">()</span>
        <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;Method&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
        <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;File&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">obj_file</span>
        <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;Distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist</span>
        <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;loc_x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loc_x</span>
        <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;loc_y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loc_y</span>
        <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="Image-Fusion.Distance.distance_finder.Primary" class="name">class <span class="ident">Primary</span></p>
      
  
    <div class="desc"><p>The described primary method of finding object distance
Requires config file (calib_info) to be established for accurate functionality</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Primary', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Primary" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Primary</span><span class="p">(</span><span class="n">Solution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The described primary method of finding object distance</span>
<span class="sd">    Requires config file (calib_info) to be established for accurate functionality</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for Primary method of execution.</span>

<span class="sd">        Note the extraction of info from the calibration json, calib_info, is  performed here. Should this procedure fail, the error will be printer but the object still constructed</span>
<span class="sd">        It will exist but it will not be functional, unless the calibration is successfully executed in the __init__</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info.json&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;focal_len&quot;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ke</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;WARNING no focal length found, primary method will fail.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ke</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method executes the tasks in order to find the distance of the object of the merge highlight</span>
<span class="sd">        The differentiating factor that delineates this method from Secondary and Tertiary is the use of calibrated focal length</span>

<span class="sd">        Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.</span>
<span class="sd">        This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</span>

<span class="sd">        `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">                dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">                dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>

            <span class="n">test_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan</span><span class="p">(</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span><span class="p">)</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">test_angle</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Primary Method Failed.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#Image-Fusion.Distance.distance_finder.Primary">Primary</a></li>
          <li><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Primary.base_file" class="name">var <span class="ident">base_file</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.base_file">base_file</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Primary.focal_len" class="name">var <span class="ident">focal_len</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.focal_len">focal_len</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Primary.height_object_in_question" class="name">var <span class="ident">height_object_in_question</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.height_object_in_question">height_object_in_question</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Primary.obj_file" class="name">var <span class="ident">obj_file</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.obj_file">obj_file</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Primary.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, base_file=None, obj_file=None, known_height=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.__init__">__init__</a></code>
    </p>

    
  
    <div class="desc"><p>constructor for Primary method of execution.</p>
<p>Note the extraction of info from the calibration json, calib_info, is  performed here. Should this procedure fail, the error will be printer but the object still constructed
It will exist but it will not be functional, unless the calibration is successfully executed in the <strong>init</strong></p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Primary.__init__', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Primary.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor for Primary method of execution.</span>
<span class="sd">    Note the extraction of info from the calibration json, calib_info, is  performed here. Should this procedure fail, the error will be printer but the object still constructed</span>
<span class="sd">    It will exist but it will not be functional, unless the calibration is successfully executed in the __init__</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info.json&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s2">&quot;focal_len&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">ke</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;WARNING no focal length found, primary method will fail.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ke</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Primary.config">
    <p>def <span class="ident">config</span>(</p><p>self, base_file, obj_file, known_height)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.config">config</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Method used for latent assignment of crucial fields, before running investigative process</p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture
<code>return</code> the instance of class 'self' that now holds states for aforementioned fields</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Primary.config', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Primary.config" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method used for latent assignment of crucial fields, before running investigative process</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    `return` the instance of class &#39;self&#39; that now holds states for aforementioned fields</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="n">base_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span> <span class="o">=</span> <span class="n">obj_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">=</span> <span class="n">known_height</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Primary.find_distance">
    <p>def <span class="ident">find_distance</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.find_distance">find_distance</a></code>
    </p>

    
  
    <div class="desc"><p>This method executes the tasks in order to find the distance of the object of the merge highlight
The differentiating factor that delineates this method from Secondary and Tertiary is the use of calibrated focal length</p>
<p>Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.
This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</p>
<p><code>return</code> dist - the discovered distance that is the result of the procedure
        dimension[2] - the location of x coordinates that are the far left and right most pixels of difference
        dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Primary.find_distance', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Primary.find_distance" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method executes the tasks in order to find the distance of the object of the merge highlight</span>
<span class="sd">    The differentiating factor that delineates this method from Secondary and Tertiary is the use of calibrated focal length</span>
<span class="sd">    Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.</span>
<span class="sd">    This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</span>
<span class="sd">    `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">            dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">            dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
        <span class="n">test_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan</span><span class="p">(</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span><span class="p">)</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">test_angle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Primary Method Failed.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Primary.find_key">
    <p>def <span class="ident">find_key</span>(</p><p>self, eq_focal_len, act_focal_len)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.find_key">find_key</a></code>
    </p>

    
  
    <div class="desc inherited"><p>This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info
Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</p>
<p>crop factor = 35mm eq / actual focal length</p>
<p>NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor
crop factor will fall with +- 0.3 units of the desired key to yield the result</p>
<p>:param eq_focal_len: 35 mm equivalent focal length
:param act_focal_len: actual focal length in mm
:return: the key to be used for later dictionary indexing</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Primary.find_key', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Primary.find_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eq_focal_len</span><span class="p">,</span> <span class="n">act_focal_len</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info</span>
<span class="sd">    Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</span>
<span class="sd">    crop factor = 35mm eq / actual focal length</span>
<span class="sd">    NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor</span>
<span class="sd">    crop factor will fall with +- 0.3 units of the desired key to yield the result</span>
<span class="sd">    :param eq_focal_len: 35 mm equivalent focal length</span>
<span class="sd">    :param act_focal_len: actual focal length in mm</span>
<span class="sd">    :return: the key to be used for later dictionary indexing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">key</span>
    <span class="n">crop_fact</span> <span class="o">=</span> <span class="n">eq_focal_len</span> <span class="o">/</span> <span class="n">act_focal_len</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">&gt;</span> <span class="n">crop_fact</span> <span class="ow">and</span> <span class="n">v</span><span class="p">[</span>
            <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.3</span> <span class="o">&lt;</span> <span class="n">crop_fact</span><span class="p">:</span>  <span class="c1"># If calculated crop factor is within +- 0.3 units of the known, then it is accepted</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Primary.get_exif">
    <p>def <span class="ident">get_exif</span>(</p><p>self, path)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.get_exif">get_exif</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Method to return the exif tags of the file at path</p>
<p><code>path</code> the path to local file that is opened and parsed for exif tags
<code>return</code> ret, the dictionary of all tags and their values</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Primary.get_exif', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Primary.get_exif" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to return the exif tags of the file at path</span>
<span class="sd">    `path` the path to local file that is opened and parsed for exif tags</span>
<span class="sd">    `return` ret, the dictionary of all tags and their values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">_getexif</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">decoded</span> <span class="o">=</span> <span class="n">TAGS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">ret</span><span class="p">[</span><span class="n">decoded</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Primary.get_object_height_px">
    <p>def <span class="ident">get_object_height_px</span>(</p><p>self, base_file, obj_file)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.get_object_height_px">get_object_height_px</a></code>
    </p>

    
  
    <div class="desc inherited"><p>This method should will be finished to find the height of the found object in pixels
to be used essential to every distance method</p>
<p><code>path</code> the path to the image file being investigated
<code>return</code> (obj_height, img_height) the height of the object in px, and the height of the image in pixels</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Primary.get_object_height_px', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Primary.get_object_height_px" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method should will be finished to find the height of the found object in pixels</span>
<span class="sd">    to be used essential to every distance method</span>
<span class="sd">    `path` the path to the image file being investigated</span>
<span class="sd">    `return` (obj_height, img_height) the height of the object in px, and the height of the image in pixels</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># the following are console commands to employ image merge</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span>
    <span class="n">consolas</span> <span class="o">=</span> <span class="n">Console</span><span class="o">.</span><span class="n">Console</span><span class="p">(</span><span class="s1">&#39;Output/ImF.png&#39;</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_extractremote</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_redhighlight</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_colordiff</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">base_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_gengroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_countsortgroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">consolas</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">first</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">img_height</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">y</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="Image-Fusion.Distance.distance_finder.Quaternary" class="name">class <span class="ident">Quaternary</span></p>
      
  
    <div class="desc"><p>The last method of finding object distance, characterized by unreliability
Requires proper file format, with exif tags, as well as exif tag 'SubjectDistance' and assumes the object is in field of focus</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Quaternary', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Quaternary" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Quaternary</span><span class="p">(</span><span class="n">Solution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The last method of finding object distance, characterized by unreliability</span>
<span class="sd">    Requires proper file format, with exif tags, as well as exif tag &#39;SubjectDistance&#39; and assumes the object is in field of focus</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for Quaternary method of execution.</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method investigates the exif tags to find the SubjectDistance tag that may reveal the concerning information</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)[</span><span class="s1">&#39;SubjectDistance&#39;</span><span class="p">]</span>  <span class="c1"># maybe useful, determined from center of focus in digital cameras</span>
            <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Quaternary Method Failed.&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#Image-Fusion.Distance.distance_finder.Quaternary">Quaternary</a></li>
          <li><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Quaternary.base_file" class="name">var <span class="ident">base_file</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.base_file">base_file</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Quaternary.focal_len" class="name">var <span class="ident">focal_len</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.focal_len">focal_len</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Quaternary.height_object_in_question" class="name">var <span class="ident">height_object_in_question</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.height_object_in_question">height_object_in_question</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Quaternary.obj_file" class="name">var <span class="ident">obj_file</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.obj_file">obj_file</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Quaternary.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, base_file=None, obj_file=None, known_height=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.__init__">__init__</a></code>
    </p>

    
  
    <div class="desc"><p>constructor for Quaternary method of execution.</p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Quaternary.__init__', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Quaternary.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor for Quaternary method of execution.</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Quaternary.config">
    <p>def <span class="ident">config</span>(</p><p>self, base_file, obj_file, known_height)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.config">config</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Method used for latent assignment of crucial fields, before running investigative process</p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture
<code>return</code> the instance of class 'self' that now holds states for aforementioned fields</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Quaternary.config', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Quaternary.config" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method used for latent assignment of crucial fields, before running investigative process</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    `return` the instance of class &#39;self&#39; that now holds states for aforementioned fields</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="n">base_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span> <span class="o">=</span> <span class="n">obj_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">=</span> <span class="n">known_height</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Quaternary.find_distance">
    <p>def <span class="ident">find_distance</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.find_distance">find_distance</a></code>
    </p>

    
  
    <div class="desc"><p>This method investigates the exif tags to find the SubjectDistance tag that may reveal the concerning information</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Quaternary.find_distance', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Quaternary.find_distance" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method investigates the exif tags to find the SubjectDistance tag that may reveal the concerning information</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)[</span><span class="s1">&#39;SubjectDistance&#39;</span><span class="p">]</span>  <span class="c1"># maybe useful, determined from center of focus in digital cameras</span>
        <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Quaternary Method Failed.&quot;</span><span class="p">)</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Quaternary.find_key">
    <p>def <span class="ident">find_key</span>(</p><p>self, eq_focal_len, act_focal_len)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.find_key">find_key</a></code>
    </p>

    
  
    <div class="desc inherited"><p>This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info
Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</p>
<p>crop factor = 35mm eq / actual focal length</p>
<p>NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor
crop factor will fall with +- 0.3 units of the desired key to yield the result</p>
<p>:param eq_focal_len: 35 mm equivalent focal length
:param act_focal_len: actual focal length in mm
:return: the key to be used for later dictionary indexing</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Quaternary.find_key', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Quaternary.find_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eq_focal_len</span><span class="p">,</span> <span class="n">act_focal_len</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info</span>
<span class="sd">    Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</span>
<span class="sd">    crop factor = 35mm eq / actual focal length</span>
<span class="sd">    NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor</span>
<span class="sd">    crop factor will fall with +- 0.3 units of the desired key to yield the result</span>
<span class="sd">    :param eq_focal_len: 35 mm equivalent focal length</span>
<span class="sd">    :param act_focal_len: actual focal length in mm</span>
<span class="sd">    :return: the key to be used for later dictionary indexing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">key</span>
    <span class="n">crop_fact</span> <span class="o">=</span> <span class="n">eq_focal_len</span> <span class="o">/</span> <span class="n">act_focal_len</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">&gt;</span> <span class="n">crop_fact</span> <span class="ow">and</span> <span class="n">v</span><span class="p">[</span>
            <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.3</span> <span class="o">&lt;</span> <span class="n">crop_fact</span><span class="p">:</span>  <span class="c1"># If calculated crop factor is within +- 0.3 units of the known, then it is accepted</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Quaternary.get_exif">
    <p>def <span class="ident">get_exif</span>(</p><p>self, path)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.get_exif">get_exif</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Method to return the exif tags of the file at path</p>
<p><code>path</code> the path to local file that is opened and parsed for exif tags
<code>return</code> ret, the dictionary of all tags and their values</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Quaternary.get_exif', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Quaternary.get_exif" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to return the exif tags of the file at path</span>
<span class="sd">    `path` the path to local file that is opened and parsed for exif tags</span>
<span class="sd">    `return` ret, the dictionary of all tags and their values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">_getexif</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">decoded</span> <span class="o">=</span> <span class="n">TAGS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">ret</span><span class="p">[</span><span class="n">decoded</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Quaternary.get_object_height_px">
    <p>def <span class="ident">get_object_height_px</span>(</p><p>self, base_file, obj_file)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.get_object_height_px">get_object_height_px</a></code>
    </p>

    
  
    <div class="desc inherited"><p>This method should will be finished to find the height of the found object in pixels
to be used essential to every distance method</p>
<p><code>path</code> the path to the image file being investigated
<code>return</code> (obj_height, img_height) the height of the object in px, and the height of the image in pixels</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Quaternary.get_object_height_px', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Quaternary.get_object_height_px" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method should will be finished to find the height of the found object in pixels</span>
<span class="sd">    to be used essential to every distance method</span>
<span class="sd">    `path` the path to the image file being investigated</span>
<span class="sd">    `return` (obj_height, img_height) the height of the object in px, and the height of the image in pixels</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># the following are console commands to employ image merge</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span>
    <span class="n">consolas</span> <span class="o">=</span> <span class="n">Console</span><span class="o">.</span><span class="n">Console</span><span class="p">(</span><span class="s1">&#39;Output/ImF.png&#39;</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_extractremote</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_redhighlight</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_colordiff</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">base_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_gengroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_countsortgroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">consolas</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">first</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">img_height</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">y</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="Image-Fusion.Distance.distance_finder.Secondary" class="name">class <span class="ident">Secondary</span></p>
      
  
    <div class="desc"><p>The described secondary method of finding object distance
Requires only proper file format, with exif tags, to run appropriately</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Secondary', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Secondary" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Secondary</span><span class="p">(</span><span class="n">Solution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The described secondary method of finding object distance</span>
<span class="sd">    Requires only proper file format, with exif tags, to run appropriately</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for Secondary method of execution.</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method executes the tasks in order to find the distance of the object of the merge highlight</span>

<span class="sd">        Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.</span>
<span class="sd">        This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</span>

<span class="sd">        `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">                dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">                dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
            <span class="n">pix_pct</span> <span class="o">=</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>

            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_key</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLengthIn35mmFilm&#39;</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>

            <span class="n">test_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan</span><span class="p">(</span><span class="n">pix_pct</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span><span class="p">)</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">test_angle</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Secondary Method Failed.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#Image-Fusion.Distance.distance_finder.Secondary">Secondary</a></li>
          <li><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Secondary.base_file" class="name">var <span class="ident">base_file</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.base_file">base_file</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Secondary.focal_len" class="name">var <span class="ident">focal_len</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.focal_len">focal_len</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Secondary.height_object_in_question" class="name">var <span class="ident">height_object_in_question</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.height_object_in_question">height_object_in_question</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Secondary.obj_file" class="name">var <span class="ident">obj_file</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.obj_file">obj_file</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Secondary.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, base_file=None, obj_file=None, known_height=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.__init__">__init__</a></code>
    </p>

    
  
    <div class="desc"><p>constructor for Secondary method of execution.</p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Secondary.__init__', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Secondary.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor for Secondary method of execution.</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Secondary.config">
    <p>def <span class="ident">config</span>(</p><p>self, base_file, obj_file, known_height)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.config">config</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Method used for latent assignment of crucial fields, before running investigative process</p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture
<code>return</code> the instance of class 'self' that now holds states for aforementioned fields</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Secondary.config', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Secondary.config" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method used for latent assignment of crucial fields, before running investigative process</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    `return` the instance of class &#39;self&#39; that now holds states for aforementioned fields</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="n">base_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span> <span class="o">=</span> <span class="n">obj_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">=</span> <span class="n">known_height</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Secondary.find_distance">
    <p>def <span class="ident">find_distance</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.find_distance">find_distance</a></code>
    </p>

    
  
    <div class="desc"><p>This method executes the tasks in order to find the distance of the object of the merge highlight</p>
<p>Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.
This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</p>
<p><code>return</code> dist - the discovered distance that is the result of the procedure
        dimension[2] - the location of x coordinates that are the far left and right most pixels of difference
        dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Secondary.find_distance', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Secondary.find_distance" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method executes the tasks in order to find the distance of the object of the merge highlight</span>
<span class="sd">    Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.</span>
<span class="sd">    This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</span>
<span class="sd">    `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">            dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">            dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
        <span class="n">pix_pct</span> <span class="o">=</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_key</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLengthIn35mmFilm&#39;</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">test_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan</span><span class="p">(</span><span class="n">pix_pct</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span><span class="p">)</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">test_angle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Secondary Method Failed.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Secondary.find_key">
    <p>def <span class="ident">find_key</span>(</p><p>self, eq_focal_len, act_focal_len)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.find_key">find_key</a></code>
    </p>

    
  
    <div class="desc inherited"><p>This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info
Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</p>
<p>crop factor = 35mm eq / actual focal length</p>
<p>NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor
crop factor will fall with +- 0.3 units of the desired key to yield the result</p>
<p>:param eq_focal_len: 35 mm equivalent focal length
:param act_focal_len: actual focal length in mm
:return: the key to be used for later dictionary indexing</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Secondary.find_key', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Secondary.find_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eq_focal_len</span><span class="p">,</span> <span class="n">act_focal_len</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info</span>
<span class="sd">    Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</span>
<span class="sd">    crop factor = 35mm eq / actual focal length</span>
<span class="sd">    NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor</span>
<span class="sd">    crop factor will fall with +- 0.3 units of the desired key to yield the result</span>
<span class="sd">    :param eq_focal_len: 35 mm equivalent focal length</span>
<span class="sd">    :param act_focal_len: actual focal length in mm</span>
<span class="sd">    :return: the key to be used for later dictionary indexing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">key</span>
    <span class="n">crop_fact</span> <span class="o">=</span> <span class="n">eq_focal_len</span> <span class="o">/</span> <span class="n">act_focal_len</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">&gt;</span> <span class="n">crop_fact</span> <span class="ow">and</span> <span class="n">v</span><span class="p">[</span>
            <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.3</span> <span class="o">&lt;</span> <span class="n">crop_fact</span><span class="p">:</span>  <span class="c1"># If calculated crop factor is within +- 0.3 units of the known, then it is accepted</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Secondary.get_exif">
    <p>def <span class="ident">get_exif</span>(</p><p>self, path)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.get_exif">get_exif</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Method to return the exif tags of the file at path</p>
<p><code>path</code> the path to local file that is opened and parsed for exif tags
<code>return</code> ret, the dictionary of all tags and their values</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Secondary.get_exif', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Secondary.get_exif" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to return the exif tags of the file at path</span>
<span class="sd">    `path` the path to local file that is opened and parsed for exif tags</span>
<span class="sd">    `return` ret, the dictionary of all tags and their values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">_getexif</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">decoded</span> <span class="o">=</span> <span class="n">TAGS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">ret</span><span class="p">[</span><span class="n">decoded</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Secondary.get_object_height_px">
    <p>def <span class="ident">get_object_height_px</span>(</p><p>self, base_file, obj_file)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.get_object_height_px">get_object_height_px</a></code>
    </p>

    
  
    <div class="desc inherited"><p>This method should will be finished to find the height of the found object in pixels
to be used essential to every distance method</p>
<p><code>path</code> the path to the image file being investigated
<code>return</code> (obj_height, img_height) the height of the object in px, and the height of the image in pixels</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Secondary.get_object_height_px', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Secondary.get_object_height_px" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method should will be finished to find the height of the found object in pixels</span>
<span class="sd">    to be used essential to every distance method</span>
<span class="sd">    `path` the path to the image file being investigated</span>
<span class="sd">    `return` (obj_height, img_height) the height of the object in px, and the height of the image in pixels</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># the following are console commands to employ image merge</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span>
    <span class="n">consolas</span> <span class="o">=</span> <span class="n">Console</span><span class="o">.</span><span class="n">Console</span><span class="p">(</span><span class="s1">&#39;Output/ImF.png&#39;</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_extractremote</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_redhighlight</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_colordiff</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">base_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_gengroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_countsortgroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">consolas</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">first</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">img_height</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">y</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="Image-Fusion.Distance.distance_finder.Solution" class="name">class <span class="ident">Solution</span></p>
      
  
    <div class="desc"><p>This class represents one solution given a single case of image distance finding.
Given the parametrized vargs, index 1: image to be examined, and index 2: the known height in meters of highlighted object,
The solution's constructor and find distance command will return the distance of the object highlighted in the image
Four variations of this task exist, The primary, Secondary, Tertiary, and Quaternary.
Each works based on the capability of the pre-conditioned machine (Primary), or as fail-safe, the exif tags of the test image (Secondary, Tertiary, and Quaternary).
The Primary reads in from the calib_info file, the calibrated info used to find the focal length and the focal length determined,
then using trigonometric principals of similar angles, the distance of the object, whose height is known, is found.
The Secondary, and Tertiary methods use the exif tags to find the focal length of the lens in the camera that was used, and apply that focal length to the trigonometry.
The final method, investigates the tags for a special 'subject distance' tag that assumes the accurate region of focus and returns that distance fom the camera</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Solution', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Solution" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents one solution given a single case of image distance finding.</span>
<span class="sd">    Given the parametrized vargs, index 1: image to be examined, and index 2: the known height in meters of highlighted object,</span>
<span class="sd">    The solution&#39;s constructor and find distance command will return the distance of the object highlighted in the image</span>
<span class="sd">    Four variations of this task exist, The primary, Secondary, Tertiary, and Quaternary.</span>
<span class="sd">    Each works based on the capability of the pre-conditioned machine (Primary), or as fail-safe, the exif tags of the test image (Secondary, Tertiary, and Quaternary).</span>
<span class="sd">    The Primary reads in from the calib_info file, the calibrated info used to find the focal length and the focal length determined,</span>
<span class="sd">    then using trigonometric principals of similar angles, the distance of the object, whose height is known, is found.</span>
<span class="sd">    The Secondary, and Tertiary methods use the exif tags to find the focal length of the lens in the camera that was used, and apply that focal length to the trigonometry.</span>
<span class="sd">    The final method, investigates the tags for a special &#39;subject distance&#39; tag that assumes the accurate region of focus and returns that distance fom the camera</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for one solution object.</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="n">base_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span> <span class="o">=</span> <span class="n">obj_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">=</span> <span class="n">known_height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;cameras.json&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_file</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method used for latent assignment of crucial fields, before running investigative process</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        `return` the instance of class &#39;self&#39; that now holds states for aforementioned fields</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="n">base_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span> <span class="o">=</span> <span class="n">obj_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">=</span> <span class="n">known_height</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method should will be finished to find the height of the found object in pixels</span>
<span class="sd">        to be used essential to every distance method</span>

<span class="sd">        `path` the path to the image file being investigated</span>
<span class="sd">        `return` (obj_height, img_height) the height of the object in px, and the height of the image in pixels</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># the following are console commands to employ image merge</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
        <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span>

        <span class="n">consolas</span> <span class="o">=</span> <span class="n">Console</span><span class="o">.</span><span class="n">Console</span><span class="p">(</span><span class="s1">&#39;Output/ImF.png&#39;</span><span class="p">)</span>
        <span class="n">consolas</span><span class="o">.</span><span class="n">do_extractremote</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="n">consolas</span><span class="o">.</span><span class="n">do_redhighlight</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="n">consolas</span><span class="o">.</span><span class="n">do_colordiff</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>

        <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">base_file</span><span class="p">)</span>
        <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>

        <span class="n">consolas</span><span class="o">.</span><span class="n">do_gengroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="n">consolas</span><span class="o">.</span><span class="n">do_countsortgroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">consolas</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">first</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">img_height</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">y</span>

    <span class="k">def</span> <span class="nf">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to return the exif tags of the file at path</span>

<span class="sd">        `path` the path to local file that is opened and parsed for exif tags</span>
<span class="sd">        `return` ret, the dictionary of all tags and their values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">_getexif</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">decoded</span> <span class="o">=</span> <span class="n">TAGS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
            <span class="n">ret</span><span class="p">[</span><span class="n">decoded</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">find_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eq_focal_len</span><span class="p">,</span> <span class="n">act_focal_len</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info</span>
<span class="sd">        Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</span>

<span class="sd">        crop factor = 35mm eq / actual focal length</span>

<span class="sd">        NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor</span>
<span class="sd">        crop factor will fall with +- 0.3 units of the desired key to yield the result</span>

<span class="sd">        :param eq_focal_len: 35 mm equivalent focal length</span>
<span class="sd">        :param act_focal_len: actual focal length in mm</span>
<span class="sd">        :return: the key to be used for later dictionary indexing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">global</span> <span class="n">key</span>
        <span class="n">crop_fact</span> <span class="o">=</span> <span class="n">eq_focal_len</span> <span class="o">/</span> <span class="n">act_focal_len</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">&gt;</span> <span class="n">crop_fact</span> <span class="ow">and</span> <span class="n">v</span><span class="p">[</span>
                <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.3</span> <span class="o">&lt;</span> <span class="n">crop_fact</span><span class="p">:</span>  <span class="c1"># If calculated crop factor is within +- 0.3 units of the known, then it is accepted</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        inherited method to be used by each subclass in a particular way</span>

<span class="sd">        `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">                dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">                dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Solution.base_file" class="name">var <span class="ident">base_file</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Solution.focal_len" class="name">var <span class="ident">focal_len</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Solution.height_object_in_question" class="name">var <span class="ident">height_object_in_question</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Solution.obj_file" class="name">var <span class="ident">obj_file</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Solution.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, base_file=None, obj_file=None, known_height=None)</p>
    </div>
    

    
  
    <div class="desc"><p>constructor for one solution object.</p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Solution.__init__', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Solution.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor for one solution object.</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="n">base_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span> <span class="o">=</span> <span class="n">obj_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">=</span> <span class="n">known_height</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;cameras.json&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_file</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span> <span class="o">=</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Solution.config">
    <p>def <span class="ident">config</span>(</p><p>self, base_file, obj_file, known_height)</p>
    </div>
    

    
  
    <div class="desc"><p>Method used for latent assignment of crucial fields, before running investigative process</p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture
<code>return</code> the instance of class 'self' that now holds states for aforementioned fields</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Solution.config', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Solution.config" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method used for latent assignment of crucial fields, before running investigative process</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    `return` the instance of class &#39;self&#39; that now holds states for aforementioned fields</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="n">base_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span> <span class="o">=</span> <span class="n">obj_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">=</span> <span class="n">known_height</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Solution.find_distance">
    <p>def <span class="ident">find_distance</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>inherited method to be used by each subclass in a particular way</p>
<p><code>return</code> dist - the discovered distance that is the result of the procedure
        dimension[2] - the location of x coordinates that are the far left and right most pixels of difference
        dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Solution.find_distance', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Solution.find_distance" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    inherited method to be used by each subclass in a particular way</span>
<span class="sd">    `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">            dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">            dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Solution.find_key">
    <p>def <span class="ident">find_key</span>(</p><p>self, eq_focal_len, act_focal_len)</p>
    </div>
    

    
  
    <div class="desc"><p>This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info
Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</p>
<p>crop factor = 35mm eq / actual focal length</p>
<p>NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor
crop factor will fall with +- 0.3 units of the desired key to yield the result</p>
<p>:param eq_focal_len: 35 mm equivalent focal length
:param act_focal_len: actual focal length in mm
:return: the key to be used for later dictionary indexing</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Solution.find_key', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Solution.find_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eq_focal_len</span><span class="p">,</span> <span class="n">act_focal_len</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info</span>
<span class="sd">    Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</span>
<span class="sd">    crop factor = 35mm eq / actual focal length</span>
<span class="sd">    NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor</span>
<span class="sd">    crop factor will fall with +- 0.3 units of the desired key to yield the result</span>
<span class="sd">    :param eq_focal_len: 35 mm equivalent focal length</span>
<span class="sd">    :param act_focal_len: actual focal length in mm</span>
<span class="sd">    :return: the key to be used for later dictionary indexing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">key</span>
    <span class="n">crop_fact</span> <span class="o">=</span> <span class="n">eq_focal_len</span> <span class="o">/</span> <span class="n">act_focal_len</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">&gt;</span> <span class="n">crop_fact</span> <span class="ow">and</span> <span class="n">v</span><span class="p">[</span>
            <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.3</span> <span class="o">&lt;</span> <span class="n">crop_fact</span><span class="p">:</span>  <span class="c1"># If calculated crop factor is within +- 0.3 units of the known, then it is accepted</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Solution.get_exif">
    <p>def <span class="ident">get_exif</span>(</p><p>self, path)</p>
    </div>
    

    
  
    <div class="desc"><p>Method to return the exif tags of the file at path</p>
<p><code>path</code> the path to local file that is opened and parsed for exif tags
<code>return</code> ret, the dictionary of all tags and their values</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Solution.get_exif', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Solution.get_exif" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to return the exif tags of the file at path</span>
<span class="sd">    `path` the path to local file that is opened and parsed for exif tags</span>
<span class="sd">    `return` ret, the dictionary of all tags and their values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">_getexif</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">decoded</span> <span class="o">=</span> <span class="n">TAGS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">ret</span><span class="p">[</span><span class="n">decoded</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Solution.get_object_height_px">
    <p>def <span class="ident">get_object_height_px</span>(</p><p>self, base_file, obj_file)</p>
    </div>
    

    
  
    <div class="desc"><p>This method should will be finished to find the height of the found object in pixels
to be used essential to every distance method</p>
<p><code>path</code> the path to the image file being investigated
<code>return</code> (obj_height, img_height) the height of the object in px, and the height of the image in pixels</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Solution.get_object_height_px', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Solution.get_object_height_px" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method should will be finished to find the height of the found object in pixels</span>
<span class="sd">    to be used essential to every distance method</span>
<span class="sd">    `path` the path to the image file being investigated</span>
<span class="sd">    `return` (obj_height, img_height) the height of the object in px, and the height of the image in pixels</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># the following are console commands to employ image merge</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span>
    <span class="n">consolas</span> <span class="o">=</span> <span class="n">Console</span><span class="o">.</span><span class="n">Console</span><span class="p">(</span><span class="s1">&#39;Output/ImF.png&#39;</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_extractremote</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_redhighlight</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_colordiff</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">base_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_gengroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_countsortgroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">consolas</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">first</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">img_height</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">y</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="Image-Fusion.Distance.distance_finder.Tertiary" class="name">class <span class="ident">Tertiary</span></p>
      
  
    <div class="desc"><p>The penultimate method of finding object distance
Requires only proper file format, with exif tags, to run appropriately</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Tertiary', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Tertiary" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Tertiary</span><span class="p">(</span><span class="n">Solution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The penultimate method of finding object distance</span>
<span class="sd">    Requires only proper file format, with exif tags, to run appropriately</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor for Tertiary method of execution.</span>

<span class="sd">        `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">        `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">        `known_height` the known height in meters of the object in the picture</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method executes the tasks in order to find the distance of the object of the merge highlight</span>

<span class="sd">        Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.</span>
<span class="sd">        This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</span>

<span class="sd">        `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">                dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">                dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>

            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_key</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLengthIn35mmFilm&#39;</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>

            <span class="n">dist</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">*</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span>
                <span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Tertiary Method Failed.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#Image-Fusion.Distance.distance_finder.Tertiary">Tertiary</a></li>
          <li><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Tertiary.base_file" class="name">var <span class="ident">base_file</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.base_file">base_file</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Tertiary.focal_len" class="name">var <span class="ident">focal_len</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.focal_len">focal_len</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Tertiary.height_object_in_question" class="name">var <span class="ident">height_object_in_question</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.height_object_in_question">height_object_in_question</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.Tertiary.obj_file" class="name">var <span class="ident">obj_file</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.obj_file">obj_file</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Tertiary.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, base_file=None, obj_file=None, known_height=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.__init__">__init__</a></code>
    </p>

    
  
    <div class="desc"><p>constructor for Tertiary method of execution.</p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Tertiary.__init__', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Tertiary.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">obj_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">known_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor for Tertiary method of execution.</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Solution</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Tertiary.config">
    <p>def <span class="ident">config</span>(</p><p>self, base_file, obj_file, known_height)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.config">config</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Method used for latent assignment of crucial fields, before running investigative process</p>
<p><code>base_file</code> the base file against which the obj_file will be checked and distance solved
<code>obj_file</code> the file being examined for difference, and determining distance
<code>known_height</code> the known height in meters of the object in the picture
<code>return</code> the instance of class 'self' that now holds states for aforementioned fields</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Tertiary.config', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Tertiary.config" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">,</span> <span class="n">known_height</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method used for latent assignment of crucial fields, before running investigative process</span>
<span class="sd">    `base_file` the base file against which the obj_file will be checked and distance solved</span>
<span class="sd">    `obj_file` the file being examined for difference, and determining distance</span>
<span class="sd">    `known_height` the known height in meters of the object in the picture</span>
<span class="sd">    `return` the instance of class &#39;self&#39; that now holds states for aforementioned fields</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="n">base_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span> <span class="o">=</span> <span class="n">obj_file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">=</span> <span class="n">known_height</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Tertiary.find_distance">
    <p>def <span class="ident">find_distance</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.find_distance">find_distance</a></code>
    </p>

    
  
    <div class="desc"><p>This method executes the tasks in order to find the distance of the object of the merge highlight</p>
<p>Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.
This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</p>
<p><code>return</code> dist - the discovered distance that is the result of the procedure
        dimension[2] - the location of x coordinates that are the far left and right most pixels of difference
        dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Tertiary.find_distance', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Tertiary.find_distance" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method executes the tasks in order to find the distance of the object of the merge highlight</span>
<span class="sd">    Using the math library, the arctangent of the height of the object in pixels divided byt he determined focal_length to find the angle of refraction, of the light through the lens.</span>
<span class="sd">    This angle is used with the known height of the object to find distance using the property of tangent(angle) = opposite / adjacent</span>
<span class="sd">    `return` dist - the discovered distance that is the result of the procedure</span>
<span class="sd">            dimension[2] - the location of x coordinates that are the far left and right most pixels of difference</span>
<span class="sd">            dimension[3] - the location of y coordinates that are the far left and right most pixels of difference</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span> <span class="s2">&quot;Solving...&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_key</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLengthIn35mmFilm&#39;</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">int</span><span class="p">(</span><span class="n">tags</span><span class="p">[</span><span class="s1">&#39;FocalLength&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">focal_len</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height_object_in_question</span> <span class="o">*</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span>
            <span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dimensions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Tertiary Method Failed.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Tertiary.find_key">
    <p>def <span class="ident">find_key</span>(</p><p>self, eq_focal_len, act_focal_len)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.find_key">find_key</a></code>
    </p>

    
  
    <div class="desc inherited"><p>This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info
Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</p>
<p>crop factor = 35mm eq / actual focal length</p>
<p>NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor
crop factor will fall with +- 0.3 units of the desired key to yield the result</p>
<p>:param eq_focal_len: 35 mm equivalent focal length
:param act_focal_len: actual focal length in mm
:return: the key to be used for later dictionary indexing</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Tertiary.find_key', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Tertiary.find_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">find_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eq_focal_len</span><span class="p">,</span> <span class="n">act_focal_len</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method determines the key to be used to access the dictionary, camera_dict, of the commonly used camera sizes and their info</span>
<span class="sd">    Using the 35 mm equivalent focal length (read in through EXIF tags) and the actual focal length (also read in through EXIF tags) are used to find the crop factor where...</span>
<span class="sd">    crop factor = 35mm eq / actual focal length</span>
<span class="sd">    NOTE, the accuracy of the sensor height being yielded are dependent on the secondary value, crop factor</span>
<span class="sd">    crop factor will fall with +- 0.3 units of the desired key to yield the result</span>
<span class="sd">    :param eq_focal_len: 35 mm equivalent focal length</span>
<span class="sd">    :param act_focal_len: actual focal length in mm</span>
<span class="sd">    :return: the key to be used for later dictionary indexing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">key</span>
    <span class="n">crop_fact</span> <span class="o">=</span> <span class="n">eq_focal_len</span> <span class="o">/</span> <span class="n">act_focal_len</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">&gt;</span> <span class="n">crop_fact</span> <span class="ow">and</span> <span class="n">v</span><span class="p">[</span>
            <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.3</span> <span class="o">&lt;</span> <span class="n">crop_fact</span><span class="p">:</span>  <span class="c1"># If calculated crop factor is within +- 0.3 units of the known, then it is accepted</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Tertiary.get_exif">
    <p>def <span class="ident">get_exif</span>(</p><p>self, path)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.get_exif">get_exif</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Method to return the exif tags of the file at path</p>
<p><code>path</code> the path to local file that is opened and parsed for exif tags
<code>return</code> ret, the dictionary of all tags and their values</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Tertiary.get_exif', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Tertiary.get_exif" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_exif</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to return the exif tags of the file at path</span>
<span class="sd">    `path` the path to local file that is opened and parsed for exif tags</span>
<span class="sd">    `return` ret, the dictionary of all tags and their values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">_getexif</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">decoded</span> <span class="o">=</span> <span class="n">TAGS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="n">ret</span><span class="p">[</span><span class="n">decoded</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="Image-Fusion.Distance.distance_finder.Tertiary.get_object_height_px">
    <p>def <span class="ident">get_object_height_px</span>(</p><p>self, base_file, obj_file)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#Image-Fusion.Distance.distance_finder.Solution">Solution</a></code>.<code><a href="#Image-Fusion.Distance.distance_finder.Solution.get_object_height_px">get_object_height_px</a></code>
    </p>

    
  
    <div class="desc inherited"><p>This method should will be finished to find the height of the found object in pixels
to be used essential to every distance method</p>
<p><code>path</code> the path to the image file being investigated
<code>return</code> (obj_height, img_height) the height of the object in px, and the height of the image in pixels</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.Tertiary.get_object_height_px', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.Tertiary.get_object_height_px" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_height_px</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_file</span><span class="p">,</span> <span class="n">obj_file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method should will be finished to find the height of the found object in pixels</span>
<span class="sd">    to be used essential to every distance method</span>
<span class="sd">    `path` the path to the image file being investigated</span>
<span class="sd">    `return` (obj_height, img_height) the height of the object in px, and the height of the image in pixels</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># the following are console commands to employ image merge</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span>
    <span class="n">consolas</span> <span class="o">=</span> <span class="n">Console</span><span class="o">.</span><span class="n">Console</span><span class="p">(</span><span class="s1">&#39;Output/ImF.png&#39;</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_extractremote</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_redhighlight</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_colordiff</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">base_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_merge</span><span class="p">(</span><span class="n">obj_file</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_gengroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">consolas</span><span class="o">.</span><span class="n">do_countsortgroups</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">consolas</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">first</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">img_height</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">y</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="Image-Fusion.Distance.distance_finder.color" class="name">class <span class="ident">color</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-Image-Fusion.Distance.distance_finder.color', this);">Show source &equiv;</a></p>
  <div id="source-Image-Fusion.Distance.distance_finder.color" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">color</span><span class="p">:</span>
   <span class="n">PURPLE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[95m&#39;</span>
   <span class="n">CYAN</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[96m&#39;</span>
   <span class="n">DARKCYAN</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[36m&#39;</span>
   <span class="n">BLUE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[94m&#39;</span>
   <span class="n">GREEN</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[92m&#39;</span>
   <span class="n">YELLOW</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[93m&#39;</span>
   <span class="n">RED</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[91m&#39;</span>
   <span class="n">BOLD</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[1m&#39;</span>
   <span class="n">UNDERLINE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[4m&#39;</span>
   <span class="n">END</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[0m&#39;</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#Image-Fusion.Distance.distance_finder.color">color</a></li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.color.BLUE" class="name">var <span class="ident">BLUE</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.color.BOLD" class="name">var <span class="ident">BOLD</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.color.CYAN" class="name">var <span class="ident">CYAN</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.color.DARKCYAN" class="name">var <span class="ident">DARKCYAN</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.color.END" class="name">var <span class="ident">END</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.color.GREEN" class="name">var <span class="ident">GREEN</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.color.PURPLE" class="name">var <span class="ident">PURPLE</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.color.RED" class="name">var <span class="ident">RED</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.color.UNDERLINE" class="name">var <span class="ident">UNDERLINE</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="Image-Fusion.Distance.distance_finder.color.YELLOW" class="name">var <span class="ident">YELLOW</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
